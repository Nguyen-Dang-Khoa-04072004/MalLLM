server.listeners('upgrade').forEach(function each(fn) {
    log('found existing upgrade handlers on the HTTP server, moving Primus as first');
    transformer.on('previous::upgrade', fn, server);
  })
subClass.prototype = Object.create(superClass && superClass.prototype, {
      constructor: {
        value: subClass,
        writable: true,
        configurable: true
      }
    })
primus.on('outgoing::reconnect', function reconnect() {
    primus.emit('outgoing::open');
  })
websocket.on('message', spark.emits('incoming::data', (next, evt) => {
        next(undefined, evt.data);
      }))
