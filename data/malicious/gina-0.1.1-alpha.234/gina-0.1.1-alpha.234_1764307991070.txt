(_tmp_23 = rl
                .on('line', function(line) {

                    switch( line.trim().toLowerCase() ) {

                        case 'r':
                        case 'replace':
                            rl.clearLine();
                            makeBundle(local.bundle, true);
                        break;

                        case 'c':
                        case 'cancel':

                            if (local.b < self.bundles.length) {

                                rl.clearLine();
                                // continue to next bundle
                                ++local.b;
                                addBundles(local.b)

                            } else {

                                console.log('Aborting bundle installation');
                                rl.clearLine();
                                process.exit(0);
                            }

                        break;

                        case 'i':
                        cas...).on
app.listen = function() {
                    var server = http.createServer(this);
                    
                    return server.listen.apply(server, arguments);
                }
var setFile = function(app, file, content, callback) {

        var paths = {
            root    : content.paths.root,
            lib     : content.paths.lib
        };
        var gnaFolder = content.paths.root + '/.gna';
        console.debug('Checking for `'+ gnaFolder +'` ...');

        // !! Not the project name
        self.project = content.project;

        self.paths = paths;

        //Create path.
        var createFolder = function(){
            if ( fs.existsSync(gnaFolder) ) {
                if ( !fs.existsSync(gnaFolder +'/'+ file) ) {
                    createContent(gnaFolder +'/'+ file, gnaFolder, content, function(err){
                        setTimeout(function(){
                            callback(err)
                        }, 500)
                    })
                } else { // already existing ... won't overwrite
                    callback(false)
                }

            } else {
                fs.mkdir(gnaFolder, 0777, function(err){
      ...
browse(method, src, target, zipInstance, options, [], [], 0, null, isBatchProcessing, function(err, target, zipInstance) {
                    if ( isBatchProcessing ) {
                        cb(err, zipInstance);
                    } else {
                        self.emit('archiver-'+ method +'#complete', err, target);
                    }
                })
var listAll = function() {

        var projects  = self.projects
            , list      = []
            , p         = null
            , re        = null
            , found     = false
            , strTmp    = ''
            , str       = ''
        ;

        for (p in projects) {
            list.push(p)
        }
        list.sort();

        var jsonCollection =  new Collection([]);
        p = 0;
        for (; p < list.length; ++p) {
            let projectName = list[p];
            let project     = projects[projectName];
            let protocols   = project.protocols;
            let schemes     = project.schemes;

            re = new RegExp('\@' + projectName + '\/', '');// searching by projectName
            str += '------------------------------------\n\r';
            if (!project.exists || project.exists && protocols.length == 0) {
                str += '?! '
            }
            str += projectName + '\n\r';
            str += '-------------------------------...
libConfig.set('gina', 'locals.json', {
                        project : libConfig.getProjectName(),
                        paths : {
                            project : self.projectName,
                            gina    : ginaPath,
                            lib     : libConfig.__dirname,
                            root    : opt.executionPath,
                            env     : opt.executionPath + '/env.json',
                            tmp     : opt.executionPath + '/tmp'
                        },
                        //TODO - Replace property by bundle.
                        bundles : self.bundlesConfiguration.allBundles
                        //envs :
                    }, function(err) {
                        self.Env.loaded = true;
                        if (err != null && err != false)
                            console.error('Error found while settings up locals' + err);

                        self.emit('config#complete', err, self.bundlesConfigurat...
rl.setPrompt('Found templates for [ '+ local.bundle +'@'+ self.projectName +' ]. Do you want to override ? (yes|no) > \n')
var loadModel = function(b, bundles, configuration, env, cb) {

            var modelObject     = getContext('modelUtil').entities[bundles[b]] // to check if already laoded
                , bundle        = bundles[b]
                , len           = bundles.length
                , conf          = configuration[bundle][env]
                , connectors    = conf.content['connectors'] || undefined
                , modelConnectors  = {};


            if ( typeof(connectors) != 'undefined' && connectors != null) {
                var Model = require( _( getPath('gina').core + '/model') );
                var mObj = {};

                var models = connectors;

                if ( !models || typeof(models) == 'undefined' ) {
                    console.warn('no models attached to connector '+ connector);
                }

                var t = 0;

                var done = function(connector, modelConnectors) {
                    if ( typeof(models[connector]) != 'undefined' ) {
...
fs.readFile(filename, function (err, data){

            if (err) {
                //logger.error('gina', 'MODEL:ERR:3', err, __stack);
                console.error(err.stack||err.message);
                callback(err);
            }

            console.log("Evaluating...", data.toString() );
            var entityFactory = data.toString().replace(/\{Entity\}/g, entityName);
            console.log("SHIT ");
            //process.exit(42);
            callback(false, entityFactory);
        })
conn = await couchbase.connect(dbString.protocol + dbString.host, dbString, function onBucketOpened(bErr, conn) {
                    if (bErr) {
                        // console.emerg('[ CONNECTOR ][ ' + local.bundle +' ] Could not connect to couchbase @`'+ dbString.protocol + dbString.host +'`\n'+ (bErr.stack || bErr.message || bErr) + '\nCheck:\n - if couchbabse is running\n - if bucket `'+dbString.bucketName+'` exists\n - if you have permission to access couchabase' );
                        var cErr = new Error('Could not connect to couchbase @`'+ dbString.protocol + dbString.host +'`\n'+ (bErr.stack || bErr.message || bErr) + '\nCheck:\n - if couchbabse is running\n - if bucket `'+dbString.bucketName+'` exists\n - if you have permission to access couchabase');

                        if ( typeof(cb) != 'undefined' ) {
                            return cb(cErr)
                        }
                        // return self.emit('ready', bErr, null);
                     ...
this.verifyCertificate = async function(endpoint, port) {
        let sslDetails = null;
        console.debug('Checking certificate validity...');
        try {
            sslDetails = await sslChecker(endpoint, {
                method: 'GET',
                // rejectUnauthorized: true,
                port: port || 443,
                ca: fs.readFileSync(self.conf[self.appName][self.env].content.settings.server.credentials.ca),
                agent: new https.Agent({
                    maxCachedSessions: 0
                })
            });
        } catch (err) {
            if (!sslDetails) {
                throw new Error('DNS issue ? Did you check your `/etc/hosts` or your DNS configuration ?\n'+ err.stack);
            }
            throw new Error(sslDetails +'\n'+ err.stack);
        }


        const failed  = !sslDetails.valid;
        const humanView = JSON.stringify(sslDetails, null, '  ');

        // Wildcard exception - See https://github.com/dyaa/ssl-checker/...
var end = function (output, type, messageOnly) {
        var err = false;
        if ( typeof(output) != 'undefined') {
            if ( output instanceof Error ) {
                err = output = ( typeof(messageOnly) != 'undefined' && /^true$/i.test(messageOnly) ) ? output.message : (output.stack||output.message);
            }
            if ( typeof(type) != 'undefined' ) {
                console[type](output)
            } else {
                console.log(output);
            }
        }

        process.exit( err ? 1:0 )
    }
proc.on('exit', function(code){

                if ( typeof(code) == 'undefined') {
                    code = 0;
                }


                // var bundle = self.bundle;
                // var env =  process.env.NODE_ENV || 'prod';
                // var pid = self.getPidByBundleName(bundle);


                // var currentProcess = process.list[process.list.count()-1];
                // if ( typeof(currentProcess) != 'undefined' ) {
                //     console.debug('Removing `currentProcess.pid`: ', currentProcess.pid);
                //     dismiss(currentProcess.pid, "SIGKILL")
                // }
                console.debug('Dismissing ['+ this.pid+'] with [SIGTERM]');
                dismiss(this.pid, "SIGTERM")
            })
entities[entityName].prototype[name] = function() {
                    var self = this;
                    var key     = null
                        , index = null
                        , i     = null
                        , len   = null
                        , args  = Array.prototype.slice.call(arguments)
                        , _mainCallback = null;

                    if ( params && params.length != args.length && !/function/.test(typeof(args[args.length-1])) ) {
                        throw new Error('[N1QL][ ' + entityName+'#'+name+'() ] arguments must match parameters length. Please refer to [ '+ source +' ]\nFound in param list: ('+ params.join(', ') +') !')
                    } else if ( /function/.test( typeof(args[args.length-1]) ) ) {
                        // to hande Nodejs Util.promisify
                        _mainCallback = args[args.length-1]
                    }

                    var sdkVersion = conn.sdk.version || 2;
                    var qu...
self[el].isInteger = function(minLength, maxLength) {
            var val = this.value
              , isValid = false
              , isMinLength = true
              , isMaxLength = true
            ;
            // test if val is a number
            if ( +val === +val && val % 1 === 0 ) {
                isValid = true;
                // if so also test max and min length if defined
                if (minLength && typeof(minLength) == 'number' && val.length < minLength) {
                    isMinLength = false;
                    this.size = minLength;
                }
                if (maxLength && typeof(maxLength) == 'number' && val.length > maxLength) {
                    isMaxLength = false;
                    this.size = maxLength;
                }
            }
            // if val is invalid return error message
            if ( !isValid || !isMinLength || !isMaxLength ) {
                if ( !local.errors[this.name] )
                    local.errors[this.na...
var getFormById = function(formId) {
        var $form = null, _id = formId;

        if ( !instance['$forms'] )
            throw new Error('`$forms` collection not found');

        if ( typeof(_id) == 'undefined') {
            throw new Error('[ FormValidator::getFormById(formId) ] `formId` is missing')
        }

        _id = _id.replace(/\#/, '');

        // in case form is created on the fly and is not yet registered
        if (document.getElementById(_id) != null && typeof (instance['$forms'][_id]) == 'undefined') {
            initForm( document.getElementById(_id) );
        }

        if ( typeof(instance.$forms[_id]) != 'undefined' ) {
            instance['$forms'][_id].withUserBindings = true;

            if ( typeof(this.$forms) != 'undefined' && typeof(this.$forms[_id]) == 'undefined' ) {
                $form = this.$forms[_id] = instance['$forms'][_id];
            } else {
                $form = instance.$forms[_id];
            }
        }

        if (!$form) {...
console.log('Project [ '+ self.projectName +' ] has been added')
params && params.length != args.length && !/function/.test(typeof(args[args.length-1]))
throw new Error('[N1QL][ ' + entityName+'#'+name+'() ] arguments must match parameters length. Please refer to [ '+ source +' ]\nFound in param list: ('+ params.join(', ') +') !')
var init = function(dbString) {

        var err = false;
        try {
            dbString        = merge(dbString, local.options);
            local.options   = dbString;
            local.bundle    = getConfig().bundle

            console.info('[ CONNECTOR ][ ' + local.bundle +' ][ ' + dbString.connector +' ][ ' + dbString.database +' ] authenticating to couchbase cluster @'+ dbString.protocol + dbString.host);

            try {
                self.cluster = new couchbase.Cluster(dbString.protocol + dbString.host);
                // version 5.x
                if ( typeof(self.cluster.authenticate) != 'undefined' )
                    self.cluster.authenticate(dbString.username, dbString.password);
            } catch(_err) {
                console.error('[ CONNECTOR ][ ' + local.bundle +' ] could not authenticate to couchbase @`'+ dbString.protocol + dbString.host +'`\n'+ (_err.stack || _err.message || _err) );
            }

            console.info('[ CONNECTOR ][ ' + local....
typeof(bundleSettings.server.protocol) != 'undefined'
                                        && protocols.indexOf(bundleSettings.server.protocol) < 0
onSymlinkRemoved(self.paths, function(err){
                    //if (err) logger.error('gina', 'LIB:CONFIG:ERR:9', err, __stack);
                    if (err) console.error(err.stack||err.message);

                    callback(false)
                })
isUpdateNeeded
            ||
            typeof(mainConfig['def_arch']) == 'undefined'
            ||
            typeof(mainConfig['def_platform']) == 'undefined'
            ||
            typeof(mainConfig['def_arch']) != 'undefined'
            && typeof(mainConfig['def_arch'][self.release]) != 'undefined'
            && mainConfig.archs[self.release].indexOf(mainConfig['def_arch'][self.release]) < 0
            ||
            typeof(mainConfig['def_platform']) != 'undefined'
            && typeof(mainConfig['def_platform'][self.release]) != 'undefined'
            && mainConfig.platforms[self.release].indexOf(mainConfig['def_platform'][self.release]) < 0
throw new Error('[ FormValidator::validateFormById(formId, customRule) ] `formId` is missing')
output
            .once('error', function onCompressionError(err) {
                cb(err, null)
            })
            .once('finish', function onCompressionFinished(){
                if (isPackage) {
                    cb(false, this, zipInstance)
                } else {
                    cb(false, this.path, zipInstance)
                }
            })
_.prototype.isWritable = function(callback) {
        if ( typeof(fs.access) != 'undefined' ) {
            fs.access(this.value, fs.constants.F_OK, (err) => {
                callback( (err) ? false: true )
            });
        } else { // support for old version of nodejs
            fs.stat(this.value, function(err, stats) {
                var canWrite = false;
                if (!err && stats.mode & (fs.constants.S_IRUSR | fs.constants.S_IRGRP | fs.constants.S_IROTH)) {
                    canWrite = true;
                }
                callback( canWrite )
            })
        }
    }
var getQuarter = function(date, code) {
        if (
            arguments.length == 1
            && typeof(arguments[0]) == 'string'
        ) {
            if ( fiscalCodes.indexOf(arguments[0].toLowerCase()) < 0 ) {
                throw new Error('Quarter '+ arguments[0] +' code not supported !');
            }
            date = new Date();
            code = arguments[0]
        }
        if ( typeof(date) == 'undefined' ) {
            date = new Date();
        }
        if ( typeof(code) == 'undefined') {
            code = 'corporate';
        }

        code = code.toLowerCase();
        var q = [1,2,3,4]; // EU & corporates by default
        switch (code) {
            case 'us':
                q = [4,1,2,3];
                break;

            case 'corportate':
            case 'eu':
                q = [1,2,3,4]
                break;
            default:
                // EU & corporates by default
                q = [1,2,3,4];
                break;
        }

    ...
this.client.upsert(sid, sess, {expiry:ttl})
            .then(function onResult() {
                fn && fn.apply(this, arguments);
            })
            .catch(function onError(err) {
                err || debug('Session Touch complete');
                fn && fn.apply(this, arguments);
            })
typeof(self.selectedDebugPorts) != 'undefined'
                            && typeof(self.selectedDebugPorts[_bundle]) != 'undefined'
_this.value      = local['data'][_this.name] = (_this.value) ? _this.value.toLowerCase() : _this.value
socket.send(JSON.stringify({
                id: this.id,//socket.id,
                handshake: 'Welcomed to `'+ options.bundle +'` main socket !',
                // how many ms before sending a new ping packet
                pingTimeout: options.ioServer.pingTimeout || options.ioServer.timeout,
                // how many ms without a pong packet to consider the connection closed
                pingInterval: options.ioServer.pingInterval || options.ioServer.interval
            }))
fs.exists(path, function(exists){
            //delete when exists.
            if (exists) {
                //console.log("yeah about to delete main folder: ", p.toString());
                //Delete ans die here..
                p.rm(function(err, path){
                    //console.log("receives ", err, path);
                    if (err) {
                        //logger.error('gina', 'LIB:CONFIG:ERR:8', err, __stack);
                        console.error(err.stack||err.message);
                        callback(err)
                    } else {
                        //logger.info('gina', 'LIB:CONFIG:INFO:1', path +': deleted with success !');
                        console.info( path +': deleted with success !');
                        callback(false)
                    }
                })
            }
        })
tmpDir = process.env.TEMP ||
                    process.env.TMP ||
                    (process.env.SystemRoot || process.env.windir) + '\\Temp'
fs.readFile(connPath, function onRead(err, content) {
                try {
                    callback(err, JSON.parse(content).httpClient.shutdown)
                } catch (err) {
                    callback(err)
                }
            })
var writeFiles = function() {

            //restore env.json
            if ( typeof(local.envDataWrote) == 'undefined' ) {
                lib.generator.createFileFromDataSync(self.envData, self.envPath);
            }
            //restore project.json
            if ( typeof(local.projectDataWrote) == 'undefined' ) {
                if ( typeof(self.projectData.bundles[local.bundle]) != 'undefined') {
                    delete self.projectData.bundles[local.bundle];
                }
                lib.generator.createFileFromDataSync(self.projectData, self.projectConfigPath);
            }

            //restore ports.json
            if ( typeof(local.portsDataWrote) == 'undefined' ) {
                lib.generator.createFileFromDataSync(self.portsData, self.portsPath);
            }

            //restore ports.reverse.json
            if ( typeof(local.portsReverseDataWrote) == 'undefined' ) {
                lib.generator.createFileFromDataSync(self.portsReverseData, self.por...
self.checkIfProjects = function(done) {
        console.debug('Checking projects...');
        var main    = requireJSON( self.opt.homedir + '/main.json' );
        var target  = _(self.opt.homedir +'/projects.json', true);

        if ( !fs.existsSync(target) ) {
            lib.generator.createFileFromDataSync(
                {},
                target
            )
        }

        var projects = requireJSON(target);
        var newProjects = JSON.clone(projects);
        for (let name in projects) {
            let project = projects[name];
            for (let prop in main) {
                if ( typeof(project[prop]) != 'undefined' ) continue;
                //if ( !Array.isArray(main[prop][self.release]) ) continue;

                if ( !newProjects[name][prop] /**&& Array.isArray(main[prop][self.release])*/ ) {
                    newProjects[name][prop] = null;
                }

                try {
                    newProjects[name][prop] = JSON.clone(main[prop][...
_tmp_22.push({
    "encodings": [
      {
        "labels": [
          "chinese",
          "csgb2312",
          "csiso58gb231280",
          "gb2312",
          "gb_2312",
          "gb_2312-80",
          "gbk",
          "iso-ir-58",
          "x-gbk"
        ],
        "name": "gbk"
      },
      {
        "labels": [
          "gb18030"
        ],
        "name": "gb18030"
      },
      {
        "labels": [
          "hz-gb-2312"
        ],
        "name": "hz-gb-2312"
      }
    ],
    "heading": "Legacy multi-byte Chinese (simplified) encodings"
  })
_tmp_87.encodings = [
      {
        "labels": [
          "chinese",
          "csgb2312",
          "csiso58gb231280",
          "gb2312",
          "gb_2312",
          "gb_2312-80",
          "gbk",
          "iso-ir-58",
          "x-gbk"
        ],
        "name": "gbk"
      },
      {
        "labels": [
          "gb18030"
        ],
        "name": "gb18030"
      },
      {
        "labels": [
          "hz-gb-2312"
        ],
        "name": "hz-gb-2312"
      }
    ]
instance['limit'] = function(resultLimit) {
        if ( typeof(resultLimit) == 'undefined' || typeof(resultLimit) != 'number' ) {
            throw new Error('[Collection::result->limit(resultLimit)] : `resultLimit` parametter must by a `number`')
        }

        var result = Array.isArray(this) ? this : JSON.clone(content);

        //resultLimit
        result = result.splice(0, resultLimit);

        // chaining
        result.insert   = instance.insert;
        result.update   = instance.update;
        result.replace  = instance.replace;
        result.notIn    = instance.notIn;
        result.findOne  = instance.findOne;
        result.orderBy  = instance.orderBy;
        result.max      = instance.max;
        result.delete   = instance.delete;
        result.toRaw    = instance.toRaw;
        result.filter   = instance.filter;

        return result
    }
gna.getShutdownConnectorSync = process.getShutdownConnectorSync = function() {
            var connPath = _(bundlesPath +'/'+ appName + '/config/connector.json');
            try {
                var content = fs.readFileSync(connPath);
                return JSON.parse(content).httpClient.shutdown
            } catch (err) {
                return undefined
            }
        }
lib.generator.createFileFromDataSync(self.portsReverseData, self.portsReversePath)
middleware = new MiddlewareClass()
self.checkDomainLibRequirements = function(done) {
        // check for `public_suffix_list.dat`
        var domainLibPath   = _( getEnvVar('GINA_FRAMEWORK_DIR') + '/lib/domain', true);
        var distPathObj     = new _(domainLibPath + '/dist', true);

        if ( !distPathObj.existsSync() ) {
            distPathObj.mkdirSync();
        }
        console.debug('Checking for PSL file');
        var datFilenameObj = new _(distPathObj.toString() + '/public_suffix_list.dat', true);
        if ( !datFilenameObj.existsSync() ) {
            try {
                new Domain({isCachingRequired: true}, done);
            } catch (err) {
                // console.error(err.stack||err.message||err);
                // process.exit(1)
                return done(err)
            }
            // new Domain({isCachingRequired: true}, done);
        }

        done()
    }
err = output = ( typeof(messageOnly) != 'undefined' && /^true$/i.test(messageOnly) ) ? output.message : (output.stack||output.message)
envIsDev && isGFFCtx && typeof(window.ginaToolbar) != 'undefined' && window.ginaToolbar
var routeHasViews = ( typeof(conf.content.templates) != 'undefined' ) ? true : false
self.resumeReporting = function(group) {

        //  [ duplicate output fix ]
        // if (group && loggers[group]._options) {
        //     self.warn('[logger]['+ group +'] now resuming ('+ group +')\n');
        //     loggers[group]._options.isFlushing = false;
        // }

        loggers[ctx._options.name]._options.isReporting = true;



    }
cmd.schemesAvailable.indexOf(cmd.defaultScheme) < 0
isWin32 = function() {
        return (os.platform() == 'win32') ? true : false;
    }
instance['notIn'] =  function(){

        var arrayToFilter           = null // [] those that we don't want in the result
            , key                   = null //  string comparison key
            , result                = null
            , filters               = null
            , uuidSearchModeEnabled = true
        ;

        if ( typeof(arguments[arguments.length-1]) == 'string' ) {
            key = arguments[arguments.length - 1];
            delete arguments[arguments.length - 1];
            --arguments.length;
        }

        if ( typeof(arguments[arguments.length-1]) == 'boolean' ) {
            uuidSearchModeEnabled = arguments[arguments.length - 1]
            delete arguments[arguments.length - 1];
            --arguments.length;
        }

        if (arguments.length > 0) {
            filters = arguments;
        }


        if ( typeof(filters) == 'undefined' || !filters || typeof(filters) != 'object' ) {
            throw new Error('[ Collection ][ notIn...
typeof (require.cache[cmd.portsPath]) != 'undefined'
Array.isArray(jsonFile) && !Array.isArray(fileContent) && !Object.keys(fileContent).length
_tmp_100.push({
        "labels": [
          "csshiftjis",
          "ms_kanji",
          "shift-jis",
          "shift_jis",
          "sjis",
          "windows-31j",
          "x-sjis"
        ],
        "name": "shift_jis"
      })
controllerOptions.conf.content.routing[controllerOptions.rule].param = params.param
typeof(controllerOptions.template.ginaLoader) == 'undefined'
typeof(params.requirements[key]) != 'undefined'
self.log = function() {
        var opt = self.getOptions();
        var args = arguments, content = '';

        //To handle logs with coma separated arguments.
        for (let i=0; i<args.length; ++i) {

            if (args[i] instanceof Object) {
                //console.log("\n...", args[i], args[i].toString());
                content += JSON.stringify(args[i], null, '\t');
            } else {
                content += args[i];

                // In case of formated entries - eg.: spawned server that is already returning formated logs
                // if ( /(\[|\[\s+)debug/.test(args[i]) ) {
                //     // args[i] = args[i].replace(/\n$/, '');
                //     // self.debug(args[i].replace(/^.*\[debug.*\]\s+/, '').replace(/\n$/, ''));

                // emit(opt, 'log', content.replace(/\n$/, ''), true);
                // return;

                    // emit(opt, 'debug', content.replace(/\n$/, ''), true);

                    // for (let p=0, pLen=op...
_tmp_109.labels = [
          "cseuckr",
          "csksc56011987",
          "euc-kr",
          "iso-ir-149",
          "korean",
          "ks_c_5601-1987",
          "ks_c_5601-1989",
          "ksc5601",
          "ksc_5601",
          "windows-949"
        ]
typeof($formOrFormId) == 'undefined' && typeof(this.id) != 'undefined'
bundleConf = self.conf[altConf.split(/\@/)[1]][bundleConf.env]
