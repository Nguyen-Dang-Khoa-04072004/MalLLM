// File: 2024-06-07-test-pkg-x5-v3.2.3/package/index.js
// ======================================================================
Line 58: parseInt(n, 10)
Line 59: InvalidParameter()
Line 65: {

        if (d === 0) {
            throw DivisionByZero();
        }

        var f = Object.create(Fraction.prototype);
        f["s"] = n < 0 ? -1 : 1;

        n = n < 0 ? -n : n;

        var a = gcd(n, d);

        f["n"] = n / a;
        f["d"] = d / a;
        return f;
    }
Line 72: f["s"] = n < 0 ? -1 : 1
Line 78: f["n"] = n / a
Line 79: f["d"] = d / a
Line 93: {
                n /= i;
                factors[i] = (factors[i] || 0) + 1;
            }
Line 95: factors[i] = (factors[i] || 0) + 1
Line 103: {
            factors[num] = (factors[num] || 0) + 1;
        }
Line 104: factors[num] = (factors[num] || 0) + 1
Line 109: {

        var n = 0, d = 1, s = 1;
        var v = 0, w = 0, x = 0, y = 1, z = 1;

        var A = 0, B = 1;
        var C = 1, D = 1;

        var N = 10000000;
        var M;

        if (p1 === undefined || p1 === null) {
            /* void */
        } else if (p2 !== undefined) {
            n = p1;
            d = p2;
            s = n * d;

            if (n % 1 !== 0 || d % 1 !== 0) {
                throw NonIntegerParameter();
            }

        } else
            switch (typeof p1) {

                case "object":
                    {
                        if ("d" in p1 && "n" in p1) {
                            n = p1["n"];
                            d = p1["d"];
                            if ("s" in p1)
                                n *= p1["s"];
                        } else if (0 in p1) {
                            n = p1[0];
                            if (1 in p1)
                                d = p1[1];
                        } else {
          ...
Line 136: {
                            n = p1["n"];
                            d = p1["d"];
                            if ("s" in p1)
                                n *= p1["s"];
                        }
Line 137: n = p1["n"]
Line 138: d = p1["d"]
Line 141: {
                            n = p1[0];
                            if (1 in p1)
                                d = p1[1];
                        }
Line 142: n = p1[0]
Line 146: InvalidParameter()
Line 216: InvalidParameter()
Line 225: { // Check if it's just a simple number "1234"
                            w = assign(B[A++], s);
                        }
Line 226: w = assign(B[A++], s)
Line 229: { // Handle 0.5 and .5
                                v = assign(B[A++], s);
                            }
Line 230: v = assign(B[A++], s)
Line 235: {
                                w = assign(B[A], s);
                                y = Math.pow(10, B[A].length);
                                A++;
                            }
Line 236: w = assign(B[A], s)
Line 237: y = Math.pow(10, B[A].length)
Line 242: {
                                x = assign(B[A + 1], s);
                                z = Math.pow(10, B[A + 1].length) - 1;
                                A += 3;
                            }
Line 243: x = assign(B[A + 1], s)
Line 244: z = Math.pow(10, B[A + 1].length) - 1
Line 248: { // Check for a simple fraction "123/456" or "123:456"
                            w = assign(B[A], s);
                            y = assign(B[A + 2], 1);
                            A += 3;
                        }
Line 249: w = assign(B[A], s)
Line 250: y = assign(B[A + 2], 1)
Line 252: { // Check for a complex fraction "123 1/2"
                            v = assign(B[A], s);
                            w = assign(B[A + 2], s);
                            y = assign(B[A + 4], 1);
                            A += 5;
                        }
Line 253: v = assign(B[A], s)
Line 254: w = assign(B[A + 2], s)
Line 255: y = assign(B[A + 4], 1)
Line 269: InvalidParameter()
Line 276: P["s"] = s < 0 ? -1 : 1
Line 277: P["n"] = Math.abs(n)
Line 278: P["d"] = Math.abs(d)
Line 370: {
            a = gcd(P["d"], P["n"]); // Abuse variable a
            this["s"] = P["s"];
            this["n"] = P["n"] / a;
            this["d"] = P["d"] / a;
        }
Line 371: a = gcd(P["d"], P["n"])
Line 372: this["s"] = P["s"]
Line 373: this["n"] = P["n"] / a
Line 374: this["d"] = P["d"] / a
Line 418: newFraction(
                this["s"] * this["n"] * P["d"] + P["s"] * this["d"] * P["n"],
                this["d"] * P["d"]
            )
Line 419: this["s"] * this["n"] * P["d"] + P["s"] * this["d"] * P["n"]
Line 420: this["d"] * P["d"]
Line 432: newFraction(
                this["s"] * this["n"] * P["d"] - P["s"] * this["d"] * P["n"],
                this["d"] * P["d"]
            )
Line 433: this["s"] * this["n"] * P["d"] - P["s"] * this["d"] * P["n"]
Line 434: this["d"] * P["d"]
Line 446: newFraction(
                this["s"] * P["s"] * this["n"] * P["n"],
                this["d"] * P["d"]
            )
Line 447: this["s"] * P["s"] * this["n"] * P["n"]
Line 448: this["d"] * P["d"]
Line 460: newFraction(
                this["s"] * P["s"] * this["n"] * P["d"],
                this["d"] * P["n"]
            )
Line 461: this["s"] * P["s"] * this["n"] * P["d"]
Line 462: this["d"] * P["n"]
Line 509: newFraction(
                this["s"] * (P["d"] * this["n"]) % (P["n"] * this["d"]),
                P["d"] * this["d"]
            )
Line 510: this["s"] * (P["d"] * this["n"]) % (P["n"] * this["d"])
Line 511: P["d"] * this["d"]
Line 558: Math.ceil(places * this["s"] * this["n"] / this["d"])
Line 624: {

            parse(a, b);

            // Trivial case when exp is an integer

            if (P['d'] === 1) {

                if (P['s'] < 0) {
                    return newFraction(Math.pow(this['s'] * this["d"], P['n']), Math.pow(this["n"], P['n']));
                } else {
                    return newFraction(Math.pow(this['s'] * this["n"], P['n']), Math.pow(this["d"], P['n']));
                }
            }

            // Negative roots become complex
            //     (-a/b)^(c/d) = x
            // <=> (-1)^(c/d) * (a/b)^(c/d) = x
            // <=> (cos(pi) + i*sin(pi))^(c/d) * (a/b)^(c/d) = x         # rotate 1 by 180Â°
            // <=> (cos(c*pi/d) + i*sin(c*pi/d)) * (a/b)^(c/d) = x       # DeMoivre's formula in Q ( https://proofwiki.org/wiki/De_Moivre%27s_Formula/Rational_Index )
            // From which follows that only for c=0 the root is non-complex. c/d is a reduced fraction, so that sin(c/dpi)=0 occurs for d=1, which is handled by our trivial case.
    ...
Line 648: var N = factorize(this['n'])
Line 649: var D = factorize(this['d'])
Line 654: for (var k in N) {
                if (k === '1') continue;
                if (k === '0') {
                    n = 0;
                    break;
                }
                N[k] *= P['n'];

                if (N[k] % P['d'] === 0) {
                    N[k] /= P['d'];
                } else return null;
                n *= Math.pow(k, N[k]);
            }
Line 660: N[k] *= P['n']
Line 662: {
                    N[k] /= P['d'];
                }
Line 663: N[k] /= P['d']
Line 665: n *= Math.pow(k, N[k])
Line 668: for (var k in D) {
                if (k === '1') continue;
                D[k] *= P['n'];

                if (D[k] % P['d'] === 0) {
                    D[k] /= P['d'];
                } else return null;
                d *= Math.pow(k, D[k]);
            }
Line 670: D[k] *= P['n']
Line 672: {
                    D[k] /= P['d'];
                }
Line 673: D[k] /= P['d']
Line 675: d *= Math.pow(k, D[k])
Line 700: {

            parse(a, b);
            var t = (this["s"] * this["n"] * P["d"] - P["s"] * P["n"] * this["d"]);
            return (0 < t) - (t < 0);
        }
Line 703: var t = (this["s"] * this["n"] * P["d"] - P["s"] * P["n"] * this["d"])
Line 707: {

            if (isNaN(this['n']) || isNaN(this['d'])) {
                return this;
            }

            eps = eps || 0.001;

            var thisABS = this['abs']();
            var cont = thisABS['toContinued']();

            for (var i = 1; i < cont.length; i++) {

                var s = newFraction(cont[i - 1], 1);
                for (var k = i - 2; k >= 0; k--) {
                    s = s['inverse']()['add'](cont[k]);
                }

                if (Math.abs(s['sub'](thisABS).valueOf()) < eps) {
                    return s['mul'](this['s']);
                }
            }
            return this;
        }
Line 715: var thisABS = this['abs']()
Line 716: var cont = thisABS['toContinued']()
Line 718: {

                var s = newFraction(cont[i - 1], 1);
                for (var k = i - 2; k >= 0; k--) {
                    s = s['inverse']()['add'](cont[k]);
                }

                if (Math.abs(s['sub'](thisABS).valueOf()) < eps) {
                    return s['mul'](this['s']);
                }
            }
Line 720: var s = newFraction(cont[i - 1], 1)
Line 721: {
                    s = s['inverse']()['add'](cont[k]);
                }
Line 722: s = s['inverse']()['add'](cont[k])
Line 758: {

            var whole, str = "";
            var n = this["n"];
            var d = this["d"];
            if (this["s"] < 0) {
                str += '-';
            }

            if (d === 1) {
                str += n;
            } else {

                if (excludeWhole && (whole = Math.floor(n / d)) > 0) {
                    str += whole;
                    str += " ";
                    n %= d;
                }

                str += n;
                str += '/';
                str += d;
            }
            return str;
        }
Line 761: var n = this["n"]
Line 762: var d = this["d"]
Line 789: {

            var whole, str = "";
            var n = this["n"];
            var d = this["d"];
            if (this["s"] < 0) {
                str += '-';
            }

            if (d === 1) {
                str += n;
            } else {

                if (excludeWhole && (whole = Math.floor(n / d)) > 0) {
                    str += whole;
                    n %= d;
                }

                str += "\\frac{";
                str += n;
                str += '}{';
                str += d;
                str += '}';
            }
            return str;
        }
Line 792: var n = this["n"]
Line 793: var d = this["d"]
Line 821: {

            var t;
            var a = this['n'];
            var b = this['d'];
            var res = [];

            if (isNaN(a) || isNaN(b)) {
                return res;
            }

            do {
                res.push(Math.floor(a / b));
                t = a % b;
                a = b;
                b = t;
            } while (a !== 1);

            return res;
        }
Line 824: var a = this['n']
Line 825: var b = this['d']
Line 826: var res = []
Line 833: res.push(Math.floor(a / b))
Line 847: {

            var N = this["n"];
            var D = this["d"];

            if (isNaN(N) || isNaN(D)) {
                return "NaN";
            }

            dec = dec || 15; // 15 = decimal places when no repetation

            var cycLen = cycleLen(N, D); // Cycle length
            var cycOff = cycleStart(N, D, cycLen); // Cycle start

            var str = this['s'] < 0 ? "-" : "";

            str += N / D | 0;

            N %= D;
            N *= 10;

            if (N)
                str += ".";

            if (cycLen) {

                for (var i = cycOff; i--;) {
                    str += N / D | 0;
                    N %= D;
                    N *= 10;
                }
                str += "(";
                for (var i = cycLen; i--;) {
                    str += N / D | 0;
                    N %= D;
                    N *= 10;
                }
                str += ")";
            } else {
                for (var i = dec; N && i--;) {
             ...
Line 849: var N = this["n"]
Line 850: var D = this["d"]
Line 858: cycleLen(N, D)
Line 861: var str = this['s'] < 0 ? "-" : ""
Line 896: {
        Object.defineProperty(exports, "__esModule", { 'value': true });
        exports['default'] = Fraction;
        module['exports'] = Fraction;
    }
Line 898: exports['default'] = Fraction
Line 899: module['exports'] = Fraction
Line 900: {
        root['Fraction'] = Fraction;
    }
Line 901: root['Fraction'] = Fraction
