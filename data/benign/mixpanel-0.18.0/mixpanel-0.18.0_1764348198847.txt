const proxyPath = process.env.HTTPS_PROXY || process.env.HTTP_PROXY
const proxyAgent = proxyPath ? new HttpsProxyAgent(Object.assign(url.parse(proxyPath), {
      keepAlive,
    })) : null
this.mixpanel.config.logger.debug("Sending the following data to Mixpanel (Engage)", { data })
request = request_lib.request(request_options, function(res) {
            var data = "";
            res.on('data', function(chunk) {
                data += chunk;
            });

            res.on('end', function() {
                var e;
                if (metrics.config.verbose) {
                    try {
                        var result = JSON.parse(data);
                        if(result.status != 1) {
                            e = new Error("Mixpanel Server Error: " + result.error);
                        }
                    }
                    catch(ex) {
                        e = new Error("Could not parse response from Mixpanel");
                    }
                }
                else {
                    e = (data !== '1') ? new Error("Mixpanel Server Error: " + data) : undefined;
                }

                callback(e);
            });
        })
request.on('error', function(e) {
            if (metrics.config.debug) {
                metrics.config.logger.error("Got Error: " + e.message);
            }
            callback(e);
        })
request.write(content)
