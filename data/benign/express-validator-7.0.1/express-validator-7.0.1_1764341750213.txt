const run = async (req, opts) => {
        const surrogateContext = new context_builder_1.ContextBuilder().addItem(dummyItem).build();
        // Run each group of chains in parallel
        const promises = chains.map(async (chain) => {
            const group = Array.isArray(chain) ? chain : [chain];
            const results = await utils_1.runAllChains(req, group, { dryRun: true });
            const { contexts, groupErrors } = results.reduce(({ contexts, groupErrors }, result) => {
                const { context } = result;
                contexts.push(context);
                const fieldErrors = context.errors.filter((error) => error.type === 'field');
                groupErrors.push(...fieldErrors);
                return { contexts, groupErrors };
            }, {
                contexts: [],
                groupErrors: [],
            });
            // #536: The data from a chain within oneOf() can only be made available to e.g. matchedData()
            // if its entire g...
const surrogateContext = new context_builder_1.ContextBuilder().addItem(dummyItem).build()
const checks = options.requiredOnly && optional
            ? [
                (value) => value !== undefined,
                (value) => (optional === 'null' ? value != null : true),
                (value) => (optional === 'falsy' ? value : true),
            ]
            : []
_tmp_10 = results.reduce(({ contexts, groupErrors }, result) => {
                const { context } = result;
                contexts.push(context);
                const fieldErrors = context.errors.filter((error) => error.type === 'field');
                groupErrors.push(...fieldErrors);
                return { contexts, groupErrors };
            }, {
                contexts: [],
                groupErrors: [],
            })
