// File: tmp/tmp81z0um_a/urcheckin/package/cli.js
// ======================================================================
Line 2: _tmp_0 = require('child_process')
Line 3: const path = require('path')
Line 4: const fs = require('fs-extra')
Line 5: _tmp_1 = require('commander')
Line 7: path.join(homeDir, '.urcheckin-config.json')
Line 22: config = JSON.parse(fs.readFileSync(configPath, 'utf8'))
Line 40: {
    const child = spawn('node', [path.join(__dirname, 'index.js')], {
      detached: true,
      stdio: 'ignore'
    });
    child.unref();
    console.log('UrCheckin has been started in background mode.');
    process.exit(0);
  }
Line 41: const child = spawn('node', [path.join(__dirname, 'index.js')], {
      detached: true,
      stdio: 'ignore'
    })
Line 47: process.exit(0)
Line 59: program.help()

// File: tmp/tmp81z0um_a/urcheckin/package/index.js
// ======================================================================
Line 3: const fs = require('fs-extra')
Line 4: const path = require('path')
Line 5: _tmp_5 = require('child_process')
Line 6: const cron = require('node-cron')
Line 7: const axios = require('axios')
Line 10: path.join(homeDir, '.urcheckin-config.json')
Line 11: path.join(homeDir, 'Documents', 'urcheckin-logs.txt')
Line 18: config = JSON.parse(fs.readFileSync(configPath, 'utf8'))
Line 33: {
    exec('curl -s ifconfig.me', async (error, stdout, stderr) => {
      if (error) {
        logMessage(`Error executing curl: ${error}`);
        return;
      }

      const ip = stdout.trim();
      logMessage(`Current IP: ${ip}`);

      if (ip === '115.77.184.121') {
        try {
          const response = await axios.post('https://urcheckin.urtest.click/api/checkin-heartbeat', {
            email: config.email,
            key: config.key
          }, {
            headers: {
              'Content-Type': 'application/json'
            }
          });

          logMessage(`API call successful. Response: ${JSON.stringify(response.data)}`);
        } catch (apiError) {
          logMessage(`Error calling API: ${apiError.message}`);
        }
      } else {
        logMessage('IP does not match, skipping API call');
      }
    });
  }
Line 34: exec('curl -s ifconfig.me', async (error, stdout, stderr) => {
      if (error) {
        logMessage(`Error executing curl: ${error}`);
        return;
      }

      const ip = stdout.trim();
      logMessage(`Current IP: ${ip}`);

      if (ip === '115.77.184.121') {
        try {
          const response = await axios.post('https://urcheckin.urtest.click/api/checkin-heartbeat', {
            email: config.email,
            key: config.key
          }, {
            headers: {
              'Content-Type': 'application/json'
            }
          });

          logMessage(`API call successful. Response: ${JSON.stringify(response.data)}`);
        } catch (apiError) {
          logMessage(`Error calling API: ${apiError.message}`);
        }
      } else {
        logMessage('IP does not match, skipping API call');
      }
    })
Line 40: stdout.trim()
Line 45: const response = await axios.post('https://urcheckin.urtest.click/api/checkin-heartbeat', {
            email: config.email,
            key: config.key
          }, {
            headers: {
              'Content-Type': 'application/json'
            }
          })
Line 69: cron.schedule('0 */2 * * * *', checkIpAndCallApi)

// File: tmp/tmp81z0um_a/urcheckin/package/install.js
// ======================================================================
Line 1: const fs = require('fs-extra')
Line 2: const path = require('path')
Line 3: _tmp_6 = require('child_process')
Line 4: const readline = require('readline')
Line 5: const os = require('os')
Line 8: path.join(homeDir, 'Library', 'LaunchAgents')
Line 9: path.join(launchAgentsDir, 'com.urcheckin.plist')
Line 10: path.join(homeDir, '.urcheckin-config.json')
Line 13: const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
  })
Line 14: _tmp_0.input = process.stdin
Line 18: {
    let config = { email: '', key: '' };

    try {
      if (fs.existsSync(configPath)) {
        config = JSON.parse(fs.readFileSync(configPath, 'utf8'));
      }
    } catch (e) {
    }

    const emailArg = process.argv.find(arg => arg.startsWith('--email='));
    if (emailArg) {
      config.email = emailArg.split('=')[1];
    }

    const keyArg = process.argv.find(arg => arg.startsWith('--key='));
    if (keyArg) {
      config.key = keyArg.split('=')[1];
    }

    if (config.email && config.key) {
      rl.close();
      resolve(config);
      return;
    }

    if (!config.email) {
      rl.question('Enter email (default: dong.tt@urbox.vn): ', (email) => {
        config.email = email || 'dong.tt@urbox.vn';

        if (!config.key) {
          rl.question('Enter key (default: dongtran): ', (key) => {
            config.key = key || 'dongtran';
            rl.close();
            resolve(config);
          });
        } else {
          rl.close();
          resolve(conf...
Line 23: config = JSON.parse(fs.readFileSync(configPath, 'utf8'))
Line 28: const emailArg = process.argv.find(arg => arg.startsWith('--email='))
Line 29: {
      config.email = emailArg.split('=')[1];
    }
Line 30: config.email = emailArg.split('=')[1]
Line 33: const keyArg = process.argv.find(arg => arg.startsWith('--key='))
Line 34: {
      config.key = keyArg.split('=')[1];
    }
Line 35: config.key = keyArg.split('=')[1]
Line 45: rl.question('Enter email (default: dong.tt@urbox.vn): ', (email) => {
        config.email = email || 'dong.tt@urbox.vn';

        if (!config.key) {
          rl.question('Enter key (default: dongtran): ', (key) => {
            config.key = key || 'dongtran';
            rl.close();
            resolve(config);
          });
        } else {
          rl.close();
          resolve(config);
        }
      })
Line 49: rl.question('Enter key (default: dongtran): ', (key) => {
            config.key = key || 'dongtran';
            rl.close();
            resolve(config);
          })
Line 60: rl.question('Enter key (default: dongtran): ', (key) => {
        config.key = key || 'dongtran';
        rl.close();
        resolve(config);
      })
Line 84: const nodePath = process.execPath
Line 102: path.join(homeDir, 'Documents', 'urcheckin-out.log')
Line 104: path.join(homeDir, 'Documents', 'urcheckin-err.log')
Line 111: {
      execSync(`chmod +x "${path.join(__dirname, 'index.js')}"`);
      execSync(`chmod +x "${path.join(__dirname, 'cli.js')}"`);
      execSync(`chmod 644 "${plistPath}"`);
    }
Line 112: execSync(`chmod +x "${path.join(__dirname, 'index.js')}"`)
Line 113: execSync(`chmod +x "${path.join(__dirname, 'cli.js')}"`)
Line 114: execSync(`chmod 644 "${plistPath}"`)
Line 119: path.join(homeDir, 'Documents')
Line 121: path.join(homeDir, 'Documents', 'urcheckin-logs.txt')
Line 133: main()
