function processNodes = function processNodes(nodes, transform) {

  return nodes
    .filter(node => !isEmptyTextNode(node))
    .map((node, index) => {

      // return the result of the transform function if applicable
      let transformed;
      if (typeof transform === 'function') {
        transformed = transform(node, index);
        if (transformed === null || !!transformed) {
          return transformed;
        }
      }

      // otherwise convert the node as standard
      return convertNodeToElement(node, index, transform);

    });

}