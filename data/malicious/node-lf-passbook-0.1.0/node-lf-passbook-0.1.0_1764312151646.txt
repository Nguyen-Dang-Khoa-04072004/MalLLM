var passNoKey = Path.resolve(template.keysPath, template.keyName["passNoKey"]+".pem")
File.prototype._flush = function() {
  // Did we write the headers already? If not, start there.
  if (!this._wroteHeader)
    this._writeLocalFileHeader();

  // Is anything buffered? If so, flush it out to output stream and recurse.
  if (this._buffers) {
    for (var i in this._buffers)
      this._deflate.write(this._buffers[i]);
    this._buffers = [];
  }

  // Are we done writing to this file? Flush the deflated stream,
  // which triggers writing file descriptor.
  if (!this.writable)
    this._deflate.end();
}
var wdr = Path.resolve(template.keysPath, template.keyName["wdr"]+".pem")
_tmp_30.push("-signer")
_tmp_30.push("-inkey")
_iterator_4 = <operator>.iterator(this._buffers)
var command = 'openssl smime -binary -sign -certfile '+wdr+' -signer '+passNoKey+' -inkey '+passKey+' -passin pass:'+template.password
var sign = child_process.exec(command, function(error, stdout, stderr) {
            self.emit("info", "opensslEnd");
            if (error) {
                callback(new Error(stderr));
            } else {
                var signature = stdout.split(/\n\n/)[3];
                callback(null, new Buffer(signature, "base64"));
            }
        })
