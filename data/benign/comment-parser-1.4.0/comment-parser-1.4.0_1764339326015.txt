function seedSpec = function seedSpec(spec: Partial<Spec> = {}): Spec {
  return {
    tag: '',
    name: '',
    type: '',
    optional: false,
    description: '',
    problems: [],
    source: [],
    ...spec,
  };
}
function rewireSpecs = function rewireSpecs(block) {
    const source = block.tags.reduce((acc, spec) => spec.source.reduce((acc, line) => acc.set(line.number, line), acc), new Map());
    block.source = block.source.map((line) => source.get(line.number) || line);
    return block;
}
spec.problems.push({
        code: 'spec:name:unpaired-brackets',
        message: 'unpaired brackets',
        line: spec.source[0].number,
        critical: true,
      })
lines[0].tokens.description === '' &&
    lines[0].tokens.delimiter === markers.start
spec.problems.push({
          code: 'spec:name:empty-default',
          message: 'empty default value',
          line: spec.source[0].number,
          critical: true,
        })
function getParser$2 = function getParser$2({ startLine = 0, markers = exports.Markers, } = {}) {
        let block = null;
        let num = startLine;
        return function parseSource(source) {
            let rest = source;
            const tokens = seedTokens();
            [tokens.lineEnd, rest] = splitCR(rest);
            [tokens.start, rest] = splitSpace(rest);
            if (block === null &&
                rest.startsWith(markers.start) &&
                !rest.startsWith(markers.nostart)) {
                block = [];
                tokens.delimiter = rest.slice(0, markers.start.length);
                rest = rest.slice(markers.start.length);
                [tokens.postDelimiter, rest] = splitSpace(rest);
            }
            if (block === null) {
                num++;
                return null;
            }
            const isClosed = rest.trimRight().endsWith(markers.end);
            if (tokens.delimiter === '' &&
                rest.startsWith(markers.delim) &&
         ...
block.source = block.source.map((line) => source.get(line.number) || line)
block.source = block.source.map(line => source.get(line.number) || line)
