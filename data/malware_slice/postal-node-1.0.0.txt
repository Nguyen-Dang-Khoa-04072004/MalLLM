// File: package/Client.js
// ======================================================================
Line 1: var Promise = require('promise')
Line 2: var https = require('https')
Line 3: var concatStream = require('concat-stream')
Line 11: function (resolve, reject) {
    var data = JSON.stringify(parameters);

    var request = https.request({
      headers: {
        'Content-Type': 'application/json',
        'X-Server-API-Key': this.serverKey
      },
      host: this.host,
      method: 'POST',
      path: '/api/v1/' + controller + '/' + action
    }, function (response) {
      response.pipe(concatStream(function (content) {
        var json
        try {
          json = JSON.parse(content);
        } catch (error) {
          return reject(error);
        }
        
        if (json.status === 'success') {
          resolve(json.data);
        } else {
          reject(json.data);
        }
      }));
    });

    request.on('error', function (error) {
      reject(error);
    });

    request.write(data);

    request.end();
  }.bind(this)
Line 14: var request = https.request({
      headers: {
        'Content-Type': 'application/json',
        'X-Server-API-Key': this.serverKey
      },
      host: this.host,
      method: 'POST',
      path: '/api/v1/' + controller + '/' + action
    }, function (response) {
      response.pipe(concatStream(function (content) {
        var json
        try {
          json = JSON.parse(content);
        } catch (error) {
          return reject(error);
        }
        
        if (json.status === 'success') {
          resolve(json.data);
        } else {
          reject(json.data);
        }
      }));
    })
Line 23: response.pipe(concatStream(function (content) {
        var json
        try {
          json = JSON.parse(content);
        } catch (error) {
          return reject(error);
        }
        
        if (json.status === 'success') {
          resolve(json.data);
        } else {
          reject(json.data);
        }
      }))
Line 26: json = JSON.parse(content)
Line 43: request.write(data)
Line 45: request.end()

// File: package/SendMessage.js
// ======================================================================
Line 1: var SendResult = require('./SendResult')
Line 15: this.attributes.to.push(address)
Line 19: this.attributes.cc.push(address)
Line 23: this.attributes.bcc.push(address)
Line 54: {
  this.attributes.headers[key] = value;
}
Line 55: this.attributes.headers[key] = value
Line 61: new Buffer(data).toString('base64')
Line 64: this.attributes.attachments.push(attachment)
Line 68: this.client.makeRequest('send', 'message', this.attributes)
    .then(function (result) {
      return new SendResult(this.client, result);
    }.bind(this))
Line 69: function (result) {
      return new SendResult(this.client, result);
    }.bind(this)

// File: package/SendRawMessage.js
// ======================================================================
Line 1: var SendResult = require('./SendResult')
Line 12: {
  this.attributes.rcpt_to = (this.attributes.rcpt_to || []);
  this.attributes.rcpt_to.push(address);
}
Line 13: this.attributes.rcpt_to = (this.attributes.rcpt_to || [])
Line 14: this.attributes.rcpt_to.push(address)
Line 18: new Buffer(content).toString('base64')
Line 22: this.client.makeRequest('send', 'raw', this.attributes)
    .then(function (result) {
      return new SendResult(this.client, result);
    }.bind(this))
Line 23: function (result) {
      return new SendResult(this.client, result);
    }.bind(this)

// File: package/SendResult.js
// ======================================================================
Line 1: var Message = require('./Message')
Line 14: for (var key in messages) {
      this._recipients[key.toLowerCase()] = new Message(this.client, messages[key]);
    }
Line 15: this._recipients[key.toLowerCase()] = new Message(this.client, messages[key])

// File: package/index.js
// ======================================================================
Line 1: var Client = require('./Client')
Line 2: var SendMessage = require('./SendMessage')
Line 3: var SendRawMessage = require('./SendRawMessage')
