Proxy.prototype = {
        request: function( params, callback, errCallback ) {
            // special code for hsf proxy
            if ( this._opt.type === 'hsf' || this._opt.type === 'mysql'  ) {
                params = { args: JSON.stringify(params) };
            }
            IO( {
                url: this._opt.bypass
                        ? this._opt.url 
                            + ( this._opt.url.indexOf( '?' ) === -1 ? '?' : '&' )
                            + '_version=' + this._opt.version
                        : Proxy.base + '/' + this._opt.id,
                data: params,
                type: this._opt.method,
                dataType: this._opt.bypass ? 'jsonp': this._opt.dataType,
                success: callback,
                error: errCallback
            } );
        },
        getOptions: function() {
            return this._opt;
        }
    }
this._opt.type === 'hsf' || this._opt.type === 'mysql'
var mtopCofig = {
    urls: {
        prod: 'http://api.m.taobao.com/rest/h5ApiUpdate.do',
        prep: 'http://api.wapa.taobao.com/rest/h5ApiUpdate.do',
        daily: 'http://api.waptest.taobao.com/rest/h5ApiUpdate.do'
    },
    tokenName: '_m_h5_tk',
    appKey: '12574478',
    appKeys: {
        prod: '12574478',
        prep: '12574478',
        daily: '4272'
    }
}
function HsfProxy = function HsfProxy( options ) {
    this._opt = options;
    // @See Readme.md about the hsf interface configuration
    var opt = {
        group: options.group || 'HSF',
        connectTimeout: options.connectTimeout || 3000 ,
        responseTimeout: options.responseTimeout || 3000,
        keepAlive: options.keepAlive,
        noDelay: options.noDelay
    };
    if ( this._opt.status === Constant.STATUS_MOCK 
        || this._opt.status === Constant.STATUS_MOCK_ERR ) {
        return;
    }

    client = client ? client : hsf.createClient( hsfOptions );

    this._consumer = client.createConsumer( options.service, options.version, opt );
}
res.send( {
            	"list_ihpone6": data1,
            	"list_冲锋衣": data2,
            	"suggest_i": data3,
            	"getNav_滑板": data4
            } )
function HttpProxy = function HttpProxy( options ) {
    this._opt = options || {};

    var urls = this._opt.urls || {};

    if ( this._opt.status === Constant.STATUS_MOCK 
        || this._opt.status === Constant.STATUS_MOCK_ERR ) {
        return;
    }
    var currUrl = urls[ this._opt.status ];

    if ( !currUrl ) {
        throw new Error( 'No url can be proxied! InterfaceId = ' + options.id );
    }
    this._opt.currUrl = currUrl;
    var urlObj = url.parse( currUrl );
    this._opt.hostname = urlObj.hostname;
    this._opt.port = urlObj.port || 80;
    this._opt.path = urlObj.path
                   + ( urlObj.path.indexOf( '?' ) !== -1 ? '&' : '?' )
                   + '_version=' + this._opt.version + '&';
}
var dir = fs.readdirSync( __dirname + '/plugins' )
function MtopProxy = function MtopProxy( options ) {
    HttpProxy.call( this, options );
}
app.get( '/getMycart', function( req, res ) {
    var cookie = req.headers.cookie;
    console.log( 'request cookie:\n', cookie );
    var cart = DataProxy.create( 'Cart.*' );
    cart.getMyCart()
        .withCookie( cookie )
        .done( function( data , setCookies ) {
            console.log( 'response cookie:\n', setCookies );
            res.setHeader( 'Set-Cookie', setCookies );
            res.send( data );
        }, function( err ) {
            console.log( err );
            res.send( 500, err );
        } );
} )
typeof path === 'string' ? this._loadProfilesFromPath( path, variables ) : this._loadProfiles( path, variables )
connection.query( self._opt.sql, params, function( err, result, fields ) {
            if ( err ) {
                err.message = 'Error occured when querying data. interface id = ' 
                    + self._opt.id + '. Caused by:\n' + err.message;
                errCallback( err );
                return;
            }
            callback( result, fields );
            connection.release();
        } )
Proxy.configBase = function( base ) {
        if ( this.base ) return;
        this.base = ( base || '' ).replace( /\/$/, '' );
        var self = this;
        // load interfaces definition.
        IO( {
            url: this.base + '/$interfaces',
            async: false,
            type: 'get',
            dataType: 'json',
            success: function( interfaces ) {
                self.config( interfaces );
            },
            error: function( err ) {
                throw err;
            }
        } );
    }
setTimeout( function() {
                errCallback( 'Mock error. Interface id = '
                    + self._opt.id + ', rule file path = '
                    + self._opt.ruleFile + ', Caused by: ' + e );
            }, 1 )
errCallback( 'Mock error. Interface id = '
                    + self._opt.id + ', rule file path = '
                    + self._opt.ruleFile + ', Caused by: ' + e )
