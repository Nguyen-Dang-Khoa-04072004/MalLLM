checkGraphvizInstalled(config)
		.then(() => {
			return createGraph(modules, circular, config, options)
				.then((image) => writeFile(imagePath, image))
				.then(() => path.resolve(imagePath));
		})
Object
			.keys(tree)
			.forEach((dep) => {
				tree[dep].forEach((id) => {
					map[id] = true;
				});
			})
(_tmp_39 = new Promise((resolve, reject) => {
	if (program.stdin) {
		let buffer = '';

		process.stdin
			.resume()
			.setEncoding('utf8')
			.on('data', (chunk) => {
				buffer += chunk;
			})
			.on('end', () => {
				try {
					resolve(JSON.parse(buffer));
				} catch (e) {
					reject(e);
				}
			});
	} else {
		resolve(program.args);
	}
})
	.then((src) => {
		if (!program.json && !program.dot) {
			spinner.start();
			config.dependencyFilter = dependencyFilter();
		}

		return madge(src, config);
	})
	.then((res) => {
		if (!program.json && !program.dot) {
			spinner.stop();
			output.getResultSummary(res, startTime);
		}

		const result = createOutputFromOptions(program, res);
		if (result !== undefined) {
			return result;
		}

		output.list(res.obj(), {
			json: program.json
		});

		return res;
	})
	.then((res) => {
		if (program.warning && !program.json) {
			output.warnings(res);
		}

		if (!program.json && !program.dot) {
			console.log('');
		}

		process.exit(exitCode);
	})).catch
writeFile(imagePath, image)
tree[dep].forEach((id) => {
					map[id] = true;
				})
