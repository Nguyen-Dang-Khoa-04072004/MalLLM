// File: package/install.js
// ======================================================================
Line 3: const path = require('path')
Line 4: const p = require('phin').promisified
Line 5: const pp = require('parent-packages')
Line 6: const isGlobalInstall = require('is-global-install')()
Line 8: const constants = require(path.join(__dirname, 'lib', 'constants.js'))
Line 12: {
	const allParents = await pp(path.join(__dirname, '..')) // Includes tracked package at index 0
	const trackedPackage = allParents[0]

	const res = await p({
		'url': constants.installEndpoint,
		'method': 'POST',
		'data': {
			'name': trackedPackage.name,
			'version': trackedPackage.version,
			'parents': allParents.slice(1).filter((package) => typeof package.name === 'string' && typeof package.version === 'string').map((package) => {
				package = {
					'name': package.name,
					'version': package.version
				}
			}),
			'nodeVersion': process.version,
			'platform': process.platform,
			'global': isGlobalInstall
		},
		'headers': {
			'host': constants.apiHost
		}
	})

	if (res.statusCode === 200) {
		console.log('npmtrack > All systems go!')
	}
	else {
		console.log('npmtrack debug data:\n' + res.body)
		console.log('npmtrack > Status code ' + res.statusCode + ' from tracking endpoint. Will overlook this!')
	}
}
Line 13: path.join(__dirname, '..')
Line 14: const trackedPackage = allParents[0]

// File: package/lib/constants.js
// ======================================================================
Line 3: _tmp_0.installEndpoint = "https://npmtrack.com/install"
